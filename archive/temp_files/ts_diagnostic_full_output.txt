Traceback (most recent call last):
  File "/Users/evgeniyyanvarskiy/PycharmProjects/TradingBot/diagnose_ts_activation.py", line 234, in main
    ts_state = await get_ts_state(repository, symbol)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/evgeniyyanvarskiy/PycharmProjects/TradingBot/diagnose_ts_activation.py", line 99, in get_ts_state
    result = await conn.fetchrow(query, symbol)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/evgeniyyanvarskiy/PycharmProjects/TradingBot/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 749, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/evgeniyyanvarskiy/PycharmProjects/TradingBot/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 1794, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/evgeniyyanvarskiy/PycharmProjects/TradingBot/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 1892, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/evgeniyyanvarskiy/PycharmProjects/TradingBot/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 1933, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/evgeniyyanvarskiy/PycharmProjects/TradingBot/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: column "activated" does not exist
HINT:  Perhaps you meant to reference the column "trailing_stop_state.is_activated" or the column "trailing_stop_state.activated_at".
================================================================================
TRAILING STOP ACTIVATION DIAGNOSTIC
================================================================================
Timestamp: 2025-10-16 01:46:44

📊 Fetching positions from database...
   Found 26 open positions in DB

⚠️  Skipping exchange API (focusing on DB analysis)

================================================================================
DETAILED ANALYSIS
================================================================================

────────────────────────────────────────────────────────────────────────────────
🔍 1000BONKUSDT (BINANCE) - SHORT
────────────────────────────────────────────────────────────────────────────────
📂 DATABASE:
   Entry Price:        $0.01523900
   Current Price:      $0.01510383
   PnL%:               +0.00%
   has_trailing_stop:  True
   trailing_activated: False

❌ EXCHANGE API: Position not found on binance!
❌ Error during diagnostics: column "activated" does not exist
HINT:  Perhaps you meant to reference the column "trailing_stop_state.is_activated" or the column "trailing_stop_state.activated_at".
