# –ú–û–î–£–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø –°–¢–ê–†–´–ú–ò –ü–û–ó–ò–¶–ò–Ø–ú–ò - –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ê–£–î–ò–¢–û–†–°–ö–ò–ô –û–¢–ß–ï–¢

**–î–∞—Ç–∞:** 2025-10-17
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 10-–º–∏–Ω—É—Ç–Ω—ã–π live-—Ç–µ—Å—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (600 —Å–µ–∫—É–Ω–¥)
**–ê—É–¥–∏—Ç–æ—Ä:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º –ª–æ–≥–∏–∫–∏
**–†–µ–∂–∏–º —Ç–µ—Å—Ç–∞:** TESTNET (Binance + Bybit)

---

## –†–ï–ó–Æ–ú–ï

### –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –í–ï–†–î–ò–ö–¢: –ú–û–î–£–õ–¨ –ü–û–õ–ù–û–°–¢–¨–Æ –ù–ï –†–ê–ë–û–¢–ê–ï–¢ ‚ùå

–ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏ **–ù–ï –°–ú–û–ì –ó–ê–ö–†–´–¢–¨ –ù–ò –û–î–ù–û–ô –ü–û–ó–ò–¶–ò–ò** –∑–∞ 10-–º–∏–Ω—É—Ç–Ω—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ:
- **82 —Å—Ç–∞—Ä—ã—Ö –ø–æ–∑–∏—Ü–∏–π**, —Ç—Ä–µ–±—É—é—â–∏—Ö –∑–∞–∫—Ä—ã—Ç–∏—è
- **43 –ø–æ–∑–∏—Ü–∏–π –≤ —Ñ–∞–∑–µ EMERGENCY** (39+ —á–∞—Å–æ–≤, ~36 —á–∞—Å–æ–≤ —Å–≤–µ—Ä—Ö –ª–∏–º–∏—Ç–∞)
- **91 –ø–æ–ø—ã—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–∑–∏—Ü–∏–π**
- **81 –ø–æ–ø—ã—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤**
- **486 –æ—Ç–∫–∞–∑–æ–≤ –æ—Ç –±–∏—Ä–∂–∏**

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞
**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π**

–ú–æ–¥—É–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—â–∞—Ç—å LIMIT-–æ—Ä–¥–µ—Ä–∞ –ø–æ —Ü–µ–ª–µ–≤—ã–º —Ü–µ–Ω–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ä—É—à–∞—é—Ç –ø—Ä–∞–≤–∏–ª–∞ –±–∏—Ä–∂–∏:
- –î–ª—è SHORT –ø–æ–∑–∏—Ü–∏–π: –†–∞–∑–º–µ—â–∞–µ—Ç BUY LIMIT –≤—ã—à–µ —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω—ã ‚Üí –û—Ç–∫–ª–æ–Ω–µ–Ω–æ (–∫–æ–¥ -4016)
- –î–ª—è LONG –ø–æ–∑–∏—Ü–∏–π (–ø—Ä–æ–¥–∞–∂–∞ –≤ —É–±—ã—Ç–æ–∫): –†–∞–∑–º–µ—â–∞–µ—Ç SELL LIMIT –Ω–∏–∂–µ —Ä—ã–Ω–∫–∞ ‚Üí –û—Ç–∫–ª–æ–Ω–µ–Ω–æ (–∫–æ–¥ -4016)

### –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è
- **100% –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–∞–∑–æ–≤** –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π
- –°—Ç–∞—Ä—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
- –†–∏—Å–∫-—ç–∫—Å–ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è
- –õ–æ–≥–∏–∫–∞ grace period –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞
- –§–∞–∑–∞ EMERGENCY (—Ä—ã–Ω–æ—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ) —Ç–∞–∫–∂–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–°–∫—Ä–∏–ø—Ç:** `scripts/aged_position_monitor.py` (450 —Å—Ç—Ä–æ–∫)
- **–ß–∞—Å—Ç–æ—Ç–∞:** –ò—Ç–µ—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- **–°–Ω–∏–º–∫–∏:** –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ (—Å–æ–±—Ä–∞–Ω–æ 19 —Å–Ω–∏–º–∫–æ–≤)
- **–°–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** 8,525 –∑–∞–ø–∏—Å–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
- **–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä:** –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ä–∞—Å—á—ë—Ç—ã aged-–ª–æ–≥–∏–∫–∏

### 2. –ü—Ä–æ–¥–∞–∫—à–Ω-–±–æ—Ç
- **–†–µ–∂–∏–º:** TESTNET —Å –ø—Ä–æ–¥–∞–∫—à–Ω-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- **–ë–∏—Ä–∂–∏:** Binance + Bybit
- **–ü–æ–∑–∏—Ü–∏–∏:** 86 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (82 —Å—Ç–∞—Ä—ã—Ö)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
  - `MAX_POSITION_AGE_HOURS=3`
  - `AGED_GRACE_PERIOD_HOURS=8`
  - `AGED_LOSS_STEP_PERCENT=0.5`
  - `AGED_MAX_LOSS_PERCENT=10.0`
  - `AGED_ACCELERATION_FACTOR=1.2`
  - `COMMISSION_PERCENT=0.1`

---

## –î–ï–¢–ê–õ–¨–ù–´–ï –ù–ê–•–û–î–ö–ò

### –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì #1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

**–§–∞–π–ª:** `core/aged_position_manager.py:319-380`
**–ú–µ—Ç–æ–¥:** `_update_single_exit_order()`
**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø ‚ö†Ô∏è

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LIMIT-–æ—Ä–¥–µ—Ä–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å—Ç–∞—Ä—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø–æ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤—ã–º —Ü–µ–Ω–∞–º. –û–¥–Ω–∞–∫–æ –ø—Ä–∞–≤–∏–ª–∞ –±–∏—Ä–∂–∏ —Ç—Ä–µ–±—É—é—Ç:
- **BUY LIMIT:** –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ù–ò–ñ–ï —Ç–µ–∫—É—â–µ–π —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω—ã
- **SELL LIMIT:** –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –í–´–®–ï —Ç–µ–∫—É—â–µ–π —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω—ã

–ú–æ–¥—É–ª—å –Ω–∞—Ä—É—à–∞–µ—Ç —ç—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–≥–¥–∞:
1. **SHORT –ø–æ–∑–∏—Ü–∏–∏ –≤ –ø—Ä–∏–±—ã–ª–∏:** –¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –í–´–®–ï —Ä—ã–Ω–∫–∞ (–ø—ã—Ç–∞–µ—Ç—Å—è –∫—É–ø–∏—Ç—å –¥–æ—Ä–æ–≥–æ)
2. **LONG –ø–æ–∑–∏—Ü–∏–∏ –≤ —É–±—ã—Ç–∫–µ:** –¶–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –ù–ò–ñ–ï —Ä—ã–Ω–∫–∞ (–ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–¥–∞—Ç—å –¥—ë—à–µ–≤–æ)

#### –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ - –ü—Ä–∏–º–µ—Ä: AEROUSDT

```
–°–∏–º–≤–æ–ª: AEROUSDT
–°—Ç–æ—Ä–æ–Ω–∞: SHORT
–í—Ö–æ–¥: $0.7947
–¢–µ–∫—É—â–∞—è: $0.7353 (–ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏!)
–¶–µ–ª—å: $0.7931 (–±–µ–∑—É–±—ã—Ç–æ–∫ + –∫–æ–º–∏—Å—Å–∏—è)
–§–∞–∑–∞: GRACE_PERIOD_BREAKEVEN (2.3/8—á)
–í–æ–∑—Ä–∞—Å—Ç: 5.3—á (2.3—á —Å–≤–µ—Ä—Ö –ª–∏–º–∏—Ç–∞)

–ü–æ–ø—ã—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è: BUY LIMIT –ø–æ $0.7931
–†–µ–∑—É–ª—å—Ç–∞—Ç: –û–¢–ö–õ–û–ù–ï–ù–û Binance
–û—à–∏–±–∫–∞: {"code":-4016,"msg":"Limit price can't be higher than 0.7720058."}
```

**–ê–Ω–∞–ª–∏–∑:**
- –î–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è SHORT, –±–æ—Ç—É –Ω—É–∂–Ω–æ –ö–£–ü–ò–¢–¨
- –¢–µ–∫—É—â–∏–π —Ä—ã–Ω–æ–∫: $0.7353
- –ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è BUY LIMIT –ø–æ $0.7931 (–Ω–∞ 8% –í–´–®–ï —Ä—ã–Ω–∫–∞)
- Binance –æ—Ç–∫–ª–æ–Ω—è–µ—Ç: BUY LIMIT –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ù–ò–ñ–ï —Ä—ã–Ω–∫–∞
- **–ü–æ–∑–∏—Ü–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ**

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- **–í—Å–µ–≥–æ –æ—à–∏–±–æ–∫ –æ—Ä–¥–µ—Ä–æ–≤:** 81
- **–ù–∞—Ä—É—à–µ–Ω–∏–π –ª–∏–º–∏—Ç–∞ —Ü–µ–Ω—ã:** 486
- **–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞:** 0%
- **–ó–∞–∫—Ä—ã—Ç–æ –ø–æ–∑–∏—Ü–∏–π:** 0 –∏–∑ 82

#### –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–π —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞

```python
# core/aged_position_manager.py:355-361
order = await enhanced_manager.create_or_update_exit_order(
    symbol=position.symbol,
    side=order_side,  # 'buy' –¥–ª—è SHORT, 'sell' –¥–ª—è LONG
    amount=abs(float(position.quantity)),
    price=precise_price,  # ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç LIMIT –æ—Ä–¥–µ—Ä
    min_price_diff_pct=0.5
)
```

#### –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—Ä–∏—á–∏–Ω—ã

–ú–æ–¥—É–ª—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ç—Ä–∏ —Ñ–∞–∑—ã –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏:

**1. GRACE PERIOD (0-8—á –ø–æ—Å–ª–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞):**
```python
# –°—Ç—Ä–æ–∫–∏ 274-277
if position.side in ['long', 'buy']:
    target_price = entry_price * (1 + double_commission)  # –ü—Ä–æ–¥–∞—Ç—å –í–´–®–ï
else:  # short/sell
    target_price = entry_price * (1 - double_commission)  # –ö—É–ø–∏—Ç—å –ù–ò–ñ–ï
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- SHORT: –ü—ã—Ç–∞–µ—Ç—Å—è –∫—É–ø–∏—Ç—å –ø–æ —Ü–µ–Ω–µ –ù–ò–ñ–ï –≤—Ö–æ–¥–∞
- –ï—Å–ª–∏ —Ä—ã–Ω–æ–∫ —É–ø–∞–ª (–ø—Ä–∏–±—ã–ª—å), —Ü–µ–ª—å –í–´–®–ï —Ç–µ–∫—É—â–µ–≥–æ —Ä—ã–Ω–∫–∞ ‚Üí –ù–ï–î–û–ü–£–°–¢–ò–ú–´–ô LIMIT –û–†–î–ï–†

**2. –§–ê–ó–ê PROGRESSIVE (8-28—á –ø–æ—Å–ª–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞):**
```python
# –°—Ç—Ä–æ–∫–∏ 299-302
if position.side in ['long', 'buy']:
    target_price = entry_price * (1 - loss_percent / 100)  # –ü—Ä–æ–¥–∞—Ç—å –ù–ò–ñ–ï (–ø—Ä–∏–Ω—è—Ç—å —É–±—ã—Ç–æ–∫)
else:  # short/sell
    target_price = entry_price * (1 + loss_percent / 100)  # –ö—É–ø–∏—Ç—å –í–´–®–ï (–ø—Ä–∏–Ω—è—Ç—å —É–±—ã—Ç–æ–∫)
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- SHORT: –ü—ã—Ç–∞–µ—Ç—Å—è –∫—É–ø–∏—Ç—å –ø–æ —Ü–µ–Ω–µ –í–´–®–ï –≤—Ö–æ–¥–∞ (–ø—Ä–∏–Ω–∏–º–∞—è —É–±—ã—Ç–æ–∫)
- –ï—Å–ª–∏ —Ä—ã–Ω–æ–∫ –≤—ã—Ä–æ—Å (—É–±—ã—Ç–æ–∫), —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ï—Å–ª–∏ —Ä—ã–Ω–æ–∫ —É–ø–∞–ª (–ø—Ä–∏–±—ã–ª—å), —Ü–µ–ª—å –≤—Å—ë –µ—â—ë –í–´–®–ï —Ä—ã–Ω–∫–∞ ‚Üí –ù–ï–î–û–ü–£–°–¢–ò–ú–´–ô LIMIT –û–†–î–ï–†

**3. –§–ê–ó–ê EMERGENCY (28—á+ –ø–æ—Å–ª–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞):**
```python
# –°—Ç—Ä–æ–∫–∏ 307-309
target_price = current_price_decimal
phase = "EMERGENCY_MARKET_CLOSE"
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ü–µ–ª—å = —Ç–µ–∫—É—â–µ–π —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ
- –í—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LIMIT –æ—Ä–¥–µ—Ä –ø–æ —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ
- –î–ª—è –±—ã—Å—Ç—Ä–æ –¥–≤–∏–∂—É—â–∏—Ö—Å—è —Ä—ã–Ω–∫–æ–≤ —ç—Ç–æ —Å—Ä–∞–∑—É –∂–µ —Ç–µ—Ä–ø–∏—Ç –Ω–µ—É–¥–∞—á—É

---

### –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì #2: –ù–µ—Ç –æ—Ç–∫–∞—Ç–∞ –∫ —Ä—ã–Ω–æ—á–Ω—ã–º –æ—Ä–¥–µ—Ä–∞–º

**–§–∞–π–ª:** `core/aged_position_manager.py:319-380`
**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø ‚ö†Ô∏è

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü–æ—Å–ª–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è LIMIT –æ—Ä–¥–µ—Ä–∞, –º–æ–¥—É–ª—å –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É, –Ω–æ –ù–ï –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π:
```python
except ImportError:
    logger.warning("Enhanced ExchangeManager not available, using standard method")
    # ... fallback –∫–æ–¥ ...
```

**–ù–æ –ù–ï–¢ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –æ—à–∏–±–æ–∫ BadRequest –æ—Ç –±–∏—Ä–∂–∏!**

#### –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
–ò–∑ –ª–æ–≥–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 355 –≤ aged_position_manager.py):
```
2025-10-17 17:56:21,606 - core.aged_position_manager - ERROR - Error updating exit order:
binance {"code":-4016,"msg":"Limit price can't be higher than 0.7720058."}
Traceback (most recent call last):
  File ".../core/aged_position_manager.py", line 355, in _update_single_exit_order
    order = await enhanced_manager.create_or_update_exit_order(...)
  File ".../core/exchange_manager_enhanced.py", line 245, in create_or_update_exit_order
    ...
ccxt.base.errors.BadRequest: binance {"code":-4016,...}
```

**–ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø–æ–≤—Ç–æ—Ä–∞, –Ω–µ—Ç –æ—Ç–∫–∞—Ç–∞ –∫ —Ä—ã–Ω–æ—á–Ω–æ–º—É –æ—Ä–¥–µ—Ä—É, –Ω–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.**

---

### –°–ï–†–¨–Å–ó–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #1: –§–∞–∑–∞ Emergency –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞

**–§–∞–π–ª:** `core/aged_position_manager.py:306-317`
**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** –°–ï–†–¨–Å–ó–ù–ê–Ø ‚ö†Ô∏è

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–§–∞–∑–∞ EMERGENCY –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫–∞–∫ "market close", –Ω–æ –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞:
```python
else:
    # PHASE 3: EMERGENCY - Use current market price
    target_price = current_price_decimal
    phase = "EMERGENCY_MARKET_CLOSE"
```

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≥–æ–≤–æ—Ä–∏—Ç "market close", –Ω–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `target_price` –≤ LIMIT –æ—Ä–¥–µ—Ä–µ.

#### –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
–ò–∑ —Å–Ω–∏–º–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
```json
{
  "symbol": "XDCUSDT",
  "age_hours": "39.47h",
  "phase": "EMERGENCY",
  "target_price": 0.06,
  "should_close": true,
  "reason": "Emergency market close"
}
```

–õ–æ–≥ –±–æ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ –∂–µ –æ—à–∏–±–∫–∏ LIMIT –æ—Ä–¥–µ—Ä–æ–≤ –¥–ª—è EMERGENCY –ø–æ–∑–∏—Ü–∏–π.

#### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
–§–∞–∑–∞ EMERGENCY –¥–æ–ª–∂–Ω–∞:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MARKET –æ—Ä–¥–µ—Ä–∞ –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
2. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—é –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –ø–æ–∑–∏—Ü–∏–π
3. –ó–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø–æ –ª—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π —Ü–µ–Ω–µ

---

### –°–ï–†–¨–Å–ó–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #2: –õ–æ–≥–∏–∫–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è, –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ —Å–ª–æ–º–∞–Ω–∞

**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** –°–ï–†–¨–Å–ó–ù–ê–Ø ‚ö†Ô∏è

#### –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Ç–µ—Å—Ç
–õ–æ–≥–∏–∫–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –≤ `scripts/aged_position_monitor.py` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç:

```python
# –ü—Ä–∏–º–µ—Ä AEROUSDT
–í—Ö–æ–¥: $0.7947 (SHORT)
–¢–µ–∫—É—â–∞—è: $0.7314
–¶–µ–ª—å (—Å–∏–º—É–ª—è—Ç–æ—Ä): $0.7931
–î–æ–ª–∂–Ω–∞ –∑–∞–∫—Ä—ã—Ç—å—Å—è: TRUE
–ü—Ä–∏—á–∏–Ω–∞: "Breakeven attempt (5.3/8h)"
```

**–í–µ—Ä–¥–∏–∫—Ç —Å–∏–º—É–ª—è—Ç–æ—Ä–∞:** ‚úÖ –ü–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç–∞ —Å –ø—Ä–∏–±—ã–ª—å—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç –±–æ—Ç–∞:** ‚ùå –ù–ï –£–î–ê–õ–û–°–¨ –∑–∞–∫—Ä—ã—Ç—å –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞

#### –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ
- **–°–∏–º—É–ª—è—Ç–æ—Ä:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è
- **–ë–æ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –æ—Ä–¥–µ—Ä–∞, –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–∫–∞–∑
- **–õ–æ–≥–∏–∫–∞:** –†–∞—Å—á—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ —Å–ª–æ–º–∞–Ω–æ

---

### –£–ú–ï–†–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #1: –ù–µ—Ç –ª–æ–≥–∏–∫–∏ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞

**–§–∞–π–ª:** `core/aged_position_manager.py:337-340`
**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** –£–ú–ï–†–ï–ù–ù–ê–Ø ‚ö†Ô∏è

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–°—Ç–æ—Ä–æ–Ω–∞ –æ—Ä–¥–µ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```python
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–æ—Ä–æ–Ω—É –æ—Ä–¥–µ—Ä–∞ (–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é –ø–æ–∑–∏—Ü–∏–∏)
order_side = 'sell' if position.side in ['long', 'buy'] else 'buy'
```

–ù–æ –ù–ï–¢ –ª–æ–≥–∏–∫–∏ –≤—ã–±–æ—Ä–∞ –º–µ–∂–¥—É:
- LIMIT –æ—Ä–¥–µ—Ä–∞–º–∏ (–¥–ª—è –≤—ã–≥–æ–¥–Ω—ã—Ö —Ü–µ–Ω)
- MARKET –æ—Ä–¥–µ—Ä–∞–º–∏ (–¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è)
- STOP-LIMIT –æ—Ä–¥–µ—Ä–∞–º–∏ (–¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤)

–í—Å–µ –æ—Ä–¥–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é LIMIT –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π.

---

### –£–ú–ï–†–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #2: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω—ã

**–§–∞–π–ª:** `core/aged_position_manager.py:341-345`
**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** –£–ú–ï–†–ï–ù–ù–ê–Ø ‚ö†Ô∏è

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ—á–Ω–æ—Å—Ç—å —Ü–µ–Ω—ã:
```python
precise_price = self._apply_price_precision(
    float(target_price),
    position.symbol,
    position.exchange
)
```

–ù–æ –ù–ï–¢ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á—Ç–æ:
1. LIMIT —Ü–µ–Ω–∞ —Å–æ–±–ª—é–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –±–∏—Ä–∂–∏ (–≤—ã—à–µ/–Ω–∏–∂–µ —Ä—ã–Ω–∫–∞)
2. –¶–µ–Ω–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç —Ä—ã–Ω–∫–∞
3. –û—Ä–¥–µ—Ä –±—É–¥–µ—Ç –ø—Ä–∏–Ω—è—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

---

### –ú–ò–ù–û–†–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #1: –ù–µ—Ç–æ—á–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–§–∞–π–ª:** `core/aged_position_manager.py:369-373`
**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** –ú–ò–ù–û–†–ù–ê–Ø ‚ö†Ô∏è

#### –ü—Ä–æ–±–ª–µ–º–∞
```python
if order.get('_was_updated'):
    self.stats['orders_updated'] += 1
else:
    self.stats['orders_created'] += 1
```

–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ —Ç–µ—Ä–ø–∏—Ç –Ω–µ—É–¥–∞—á—É, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –æ—Ç–∫–∞–∑—ã. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- `self.stats['orders_failed'] += 1`
- `self.stats['exchange_errors'] += 1`

---

## –ê–ù–ê–õ–ò–ó –°–ù–ò–ú–ö–û–í –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê

### –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–∑–∏—Ü–∏–π (10-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–µ—Å—Ç)

| –ú–µ—Ç—Ä–∏–∫–∞ | –ù–∞—á–∞–ª–æ (t=0) | –ö–æ–Ω–µ—Ü (t=600—Å) | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|---------|--------------|----------------|-----------|
| –í—Å–µ–≥–æ —Å—Ç–∞—Ä—ã—Ö –ø–æ–∑–∏—Ü–∏–π | 82 | 82 | **0 –∑–∞–∫—Ä—ã—Ç–æ** |
| –§–∞–∑–∞ EMERGENCY | 43 | 43 | 0 |
| –§–∞–∑–∞ PROGRESSIVE | 15 | 15 | 0 |
| –§–∞–∑–∞ GRACE_PERIOD | 24 | 24 | 0 |
| –í–æ–∑—Ä–∞—Å—Ç —Å—Ç–∞—Ä–µ–π—à–µ–π –ø–æ–∑–∏—Ü–∏–∏ | 39.3—á | 39.5—á | +0.2—á |
| –ó–∞–∫—Ä—ã—Ç–æ –ø–æ–∑–∏—Ü–∏–π | 0 | 0 | **0%** |

### –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

| –¢–∏–ø –æ—à–∏–±–∫–∏ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–æ—Ü–µ–Ω—Ç |
|------------|------------|---------|
| –í—Å–µ–≥–æ ERROR –ª–æ–≥–æ–≤ | 576 | 100% |
| –û—à–∏–±–∫–∏ aged –º–æ–¥—É–ª—è | 153 | 26.6% |
| –û—à–∏–±–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤ | 81 | 14.1% |
| –ù–∞—Ä—É—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ —Ü–µ–Ω—ã | 486 | 84.4% |
| –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ | 90 | 15.6% |

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å—Ç–∞—Ä—ã—Ö –ø–æ–∑–∏—Ü–∏–π:** 127 —Å–ª—É—á–∞–µ–≤ (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –≤ —Ü–∏–∫–ª–∞—Ö)
- **–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å—Ç–∞—Ä—ã—Ö –ø–æ–∑–∏—Ü–∏–π:** 91 –ø–æ–ø—ã—Ç–∫–∞
- **–ü–æ–ø—ã—Ç–æ–∫ exit –æ—Ä–¥–µ—Ä–æ–≤:** 81
- **–û—Ç–∫–∞–∑–æ–≤ –±–∏—Ä–∂–∏:** 81 (100% –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–∞–∑–æ–≤)
- **–£—Å–ø–µ—à–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π:** 0
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:** ~2 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –ø–æ–∑–∏—Ü–∏—é
- **–û–±—â–µ–µ –≤—Ä–µ–º—è CPU:** –ü—Ä–æ—Ü–µ—Å—Å –±–æ—Ç–∞ –ø–æ—Ç—Ä–µ–±–∏–ª 5 —Å–µ–∫—É–Ω–¥ –∑–∞ 10 –º–∏–Ω—É—Ç

---

## –°–†–ê–í–ù–ï–ù–ò–ï –° –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ï–ô

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–∏–∑ TECHNICAL_DOCUMENTATION.md)

> **Aged Position Manager:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤–æ–∑—Ä–∞—Å—Ç –ø–æ–∑–∏—Ü–∏–π –∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –ª–∏–∫–≤–∏–¥–∞—Ü–∏—é:
> 1. Grace period: –¢–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–∫–∏ –±–µ–∑—É–±—ã—Ç–∫–∞
> 2. Progressive: –£–≤–µ–ª–∏—á–∏–≤–∞—é—â–∞—è—Å—è —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ —É–±—ã—Ç–∫–∞–º
> 3. Emergency: –†—ã–Ω–æ—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ

### –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

| –§–∞–∑–∞ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –†–µ–∞–ª—å–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|------|--------------|------------|--------|
| Grace Period | "–¢–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–∫–∏ –±–µ–∑—É–±—ã—Ç–∫–∞" | –ü—ã—Ç–∞–µ—Ç—Å—è LIMIT –æ—Ä–¥–µ—Ä–∞, –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–∫–∞–∑ | ‚ùå –°–õ–û–ú–ê–ù–û |
| Progressive | "–£–≤–µ–ª–∏—á–∏–≤–∞—é—â–∞—è—Å—è —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ —É–±—ã—Ç–∫–∞–º" | –ü—ã—Ç–∞–µ—Ç—Å—è LIMIT –æ—Ä–¥–µ—Ä–∞, –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–∫–∞–∑ | ‚ùå –°–õ–û–ú–ê–ù–û |
| Emergency | "–†—ã–Ω–æ—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ" | –ü—ã—Ç–∞–µ—Ç—Å—è LIMIT –æ—Ä–¥–µ—Ä–∞, –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–∫–∞–∑ | ‚ùå –°–õ–û–ú–ê–ù–û |

**–í–µ—Ä–¥–∏–∫—Ç:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ù–ï –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ú–æ–¥—É–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω.

---

## –®–ê–ì–ò –í–û–°–ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø

### –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –±–∞–≥–∞

1. –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ä—É—é –ø–æ–∑–∏—Ü–∏—é (3+ —á–∞—Å–æ–≤)
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –ø—Ä–∏–±—ã–ª—å–Ω–∞—è (—Ä—ã–Ω–æ–∫ –¥–≤–∏–≥–∞–ª—Å—è –≤—ã–≥–æ–¥–Ω–æ)
3. –î–æ–∂–¥–∞—Ç—å—Å—è —Ü–∏–∫–ª–∞ aged position manager
4. –ù–∞–±–ª—é–¥–∞—Ç—å –æ—à–∏–±–∫—É –≤ –ª–æ–≥–∞—Ö:
   ```
   ERROR - Error updating exit order: binance {"code":-4016,"msg":"Limit price can't be higher than X"}
   ```

### –¢–µ—Å—Ç-–∫–µ–π—Å: SHORT –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏

```python
# –£—Å–ª–æ–≤–∏—è –≤—Ö–æ–¥–∞
position_side = "short"
entry_price = 1.0000
current_price = 0.9000  # –†—ã–Ω–æ–∫ —É–ø–∞–ª –Ω–∞ 10% (–ø—Ä–∏–±—ã–ª—å!)
age_hours = 5.0  # 2—á —Å–≤–µ—Ä—Ö –ª–∏–º–∏—Ç–∞
phase = "GRACE_PERIOD"

# –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
target_price = entry_price * (1 - 0.002)  # 0.9980 (–±–µ–∑—É–±—ã—Ç–æ–∫)
should_close = True  # –¢–µ–∫—É—â–∞—è 0.9000 < –¶–µ–ª—å 0.9980

# –ë–∞–≥: –ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è BUY LIMIT –ø–æ 0.9980
# –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ–∫—É—â–∏–π —Ä—ã–Ω–æ–∫ 0.9000
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Binance –æ—Ç–∫–ª–æ–Ω—è–µ—Ç (BUY LIMIT –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 0.9000)
# –ü–æ–∑–∏—Ü–∏—è: –û—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
```

---

## –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #1: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞ (–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï)

**–§–∞–π–ª:** `core/aged_position_manager.py:319-380`

```python
async def _update_single_exit_order(self, position, target_price: float, phase: str):
    """
    –û–±–Ω–æ–≤–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å exit –æ—Ä–¥–µ—Ä —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∏–ø–æ–º –æ—Ä–¥–µ—Ä–∞
    """
    try:
        position_id = f"{position.symbol}_{position.exchange}"
        exchange = self.exchanges.get(position.exchange)
        if not exchange:
            logger.error(f"Exchange {position.exchange} not available")
            return

        # –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ä—ã–Ω–æ—á–Ω—É—é —Ü–µ–Ω—É
        current_price = await self._get_current_price(position.symbol, position.exchange)
        if not current_price:
            logger.error(f"Could not get current price for {position.symbol}")
            return

        # –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–æ—Ä–æ–Ω—É –æ—Ä–¥–µ—Ä–∞ (–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é –ø–æ–∑–∏—Ü–∏–∏)
        order_side = 'sell' if position.side in ['long', 'buy'] else 'buy'

        # –ù–û–í–û–ï: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Ü–µ–Ω
        use_market_order = False

        if "EMERGENCY" in phase:
            # EMERGENCY: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä
            use_market_order = True
            logger.info(f"üö® EMERGENCY –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–ª—è {position.symbol} - –∏—Å–ø–æ–ª—å–∑—É–µ–º MARKET –æ—Ä–¥–µ—Ä")
        else:
            # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤–∞–ª–∏–¥–Ω–∞ –ª–∏ —Ü–µ–ª–µ–≤–∞—è —Ü–µ–Ω–∞ –¥–ª—è LIMIT –æ—Ä–¥–µ—Ä–∞
            if order_side == 'buy':
                # BUY –æ—Ä–¥–µ—Ä–∞: —Ü–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ù–ò–ñ–ï —Ç–µ–∫—É—â–µ–≥–æ —Ä—ã–Ω–∫–∞
                if target_price >= current_price * 0.999:  # –ë—É—Ñ–µ—Ä 0.1%
                    logger.warning(
                        f"‚ö†Ô∏è BUY —Ü–µ–ª—å ${target_price} —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ/–≤—ã—à–µ —Ä—ã–Ω–∫–∞ ${current_price} "
                        f"–¥–ª—è {position.symbol} - –∏—Å–ø–æ–ª—å–∑—É–µ–º MARKET –æ—Ä–¥–µ—Ä"
                    )
                    use_market_order = True
            else:  # sell
                # SELL –æ—Ä–¥–µ—Ä–∞: —Ü–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –í–´–®–ï —Ç–µ–∫—É—â–µ–≥–æ —Ä—ã–Ω–∫–∞
                if target_price <= current_price * 1.001:  # –ë—É—Ñ–µ—Ä 0.1%
                    logger.warning(
                        f"‚ö†Ô∏è SELL —Ü–µ–ª—å ${target_price} —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ/–Ω–∏–∂–µ —Ä—ã–Ω–∫–∞ ${current_price} "
                        f"–¥–ª—è {position.symbol} - –∏—Å–ø–æ–ª—å–∑—É–µ–º MARKET –æ—Ä–¥–µ—Ä"
                    )
                    use_market_order = True

        # –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ä–¥–µ—Ä —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º —Ç–∏–ø–æ–º
        if use_market_order:
            # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MARKET –æ—Ä–¥–µ—Ä –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
            order = await self._create_market_exit_order(
                exchange=exchange,
                symbol=position.symbol,
                side=order_side,
                amount=abs(float(position.quantity))
            )
            self.stats['market_orders_created'] += 1
        else:
            # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LIMIT –æ—Ä–¥–µ—Ä –ø–æ —Ü–µ–ª–µ–≤–æ–π —Ü–µ–Ω–µ
            precise_price = self._apply_price_precision(
                float(target_price),
                position.symbol,
                position.exchange
            )

            from core.exchange_manager_enhanced import EnhancedExchangeManager
            enhanced_manager = EnhancedExchangeManager(exchange.exchange)

            order = await enhanced_manager.create_or_update_exit_order(
                symbol=position.symbol,
                side=order_side,
                amount=abs(float(position.quantity)),
                price=precise_price,
                min_price_diff_pct=0.5
            )

            if order.get('_was_updated'):
                self.stats['orders_updated'] += 1
            else:
                self.stats['orders_created'] += 1

        if order:
            self.managed_positions[position_id] = {
                'last_update': datetime.now(),
                'order_id': order['id'],
                'phase': phase,
                'order_type': 'MARKET' if use_market_order else 'LIMIT'
            }
            logger.info(
                f"‚úÖ Exit –æ—Ä–¥–µ—Ä —Ä–∞–∑–º–µ—â—ë–Ω –¥–ª—è {position.symbol}: "
                f"{'MARKET' if use_market_order else f'LIMIT @ ${precise_price}'}"
            )

    except ccxt.base.errors.BadRequest as e:
        # –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –±–∏—Ä–∂–∏
        logger.error(f"–ë–∏—Ä–∂–∞ –æ—Ç–∫–ª–æ–Ω–∏–ª–∞ –æ—Ä–¥–µ—Ä –¥–ª—è {position.symbol}: {e}")
        self.stats['orders_failed'] += 1

        # –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å —Ä—ã–Ω–æ—á–Ω—ã–º –æ—Ä–¥–µ—Ä–æ–º, –µ—Å–ª–∏ –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –Ω–µ –ø—Ä–æ—à—ë–ª
        if "Limit price can't be" in str(e):
            logger.warning(f"üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ {position.symbol} —Å MARKET –æ—Ä–¥–µ—Ä–æ–º")
            try:
                order = await self._create_market_exit_order(
                    exchange=exchange,
                    symbol=position.symbol,
                    side=order_side,
                    amount=abs(float(position.quantity))
                )
                if order:
                    logger.info(f"‚úÖ Market –æ—Ä–¥–µ—Ä —É—Å–ø–µ—à–µ–Ω –¥–ª—è {position.symbol}")
                    self.stats['market_orders_created'] += 1
            except Exception as retry_error:
                logger.error(f"‚ùå Market –æ—Ä–¥–µ—Ä —Ç–∞–∫–∂–µ –Ω–µ –ø—Ä–æ—à—ë–ª –¥–ª—è {position.symbol}: {retry_error}")

    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è exit –æ—Ä–¥–µ—Ä–∞ –¥–ª—è {position.symbol}: {e}", exc_info=True)
        self.stats['orders_failed'] += 1
```

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #2: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ —Ä—ã–Ω–æ—á–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ (–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï)

**–§–∞–π–ª:** `core/aged_position_manager.py` (–Ω–æ–≤—ã–π –º–µ—Ç–æ–¥)

```python
async def _create_market_exit_order(self, exchange, symbol: str, side: str, amount: float):
    """
    –°–æ–∑–¥–∞—Ç—å MARKET –æ—Ä–¥–µ—Ä –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏

    Args:
        exchange: –û–±—ä–µ–∫—Ç –±–∏—Ä–∂–∏
        symbol: –°–∏–º–≤–æ–ª —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—Ä—ã
        side: 'buy' –∏–ª–∏ 'sell'
        amount: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–∏

    Returns:
        –°–ª–æ–≤–∞—Ä—å –æ—Ä–¥–µ—Ä–∞ –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, None –∏–Ω–∞—á–µ
    """
    try:
        logger.info(f"üì§ –°–æ–∑–¥–∞–Ω–∏–µ MARKET {side} –æ—Ä–¥–µ—Ä–∞ –¥–ª—è {symbol}: {amount}")

        # –°–æ–∑–¥–∞—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä
        order = await exchange.exchange.create_order(
            symbol=symbol,
            type='market',
            side=side,
            amount=amount,
            params={'reduceOnly': True}  # –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–æ–ª—å–∫–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
        )

        logger.info(
            f"‚úÖ MARKET –æ—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω: {order['id']} "
            f"({side} {amount} {symbol})"
        )

        return order

    except Exception as e:
        logger.error(f"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –¥–ª—è {symbol}: {e}", exc_info=True)
        return None
```

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #3: –î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–£–ú–ï–†–ï–ù–ù–û–ï)

**–§–∞–π–ª:** `core/aged_position_manager.py:__init__`

```python
self.stats = {
    'aged_positions': 0,
    'orders_created': 0,
    'orders_updated': 0,
    'orders_failed': 0,  # –ù–û–í–û–ï
    'market_orders_created': 0,  # –ù–û–í–û–ï
    'limit_orders_created': 0,  # –ù–û–í–û–ï
    'exchange_errors': 0  # –ù–û–í–û–ï
}
```

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #4: –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Ñ–∞–∑—ã EMERGENCY (–°–ï–†–¨–Å–ó–ù–û–ï)

**–§–∞–π–ª:** `core/aged_position_manager.py:306-317`

```python
else:
    # –§–ê–ó–ê 3: EMERGENCY - MARKET –æ—Ä–¥–µ—Ä –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ
    target_price = current_price_decimal
    phase = "EMERGENCY_MARKET_CLOSE"

    # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —É–±—ã—Ç–æ–∫ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    if position.side in ['long', 'buy']:
        loss_percent = ((entry_price - current_price_decimal) / entry_price) * 100
    else:
        loss_percent = ((current_price_decimal - entry_price) / entry_price) * 100

    # –ö–†–ò–¢–ò–ß–ï–°–ö–ò: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –≤ —Ñ–∞–∑–µ emergency
    # (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ _update_single_exit_order –ø—Ä–æ–≤–µ—Ä–∫–æ–π "EMERGENCY" –≤ phase)
```

---

## –í–´–Ø–í–õ–ï–ù–ù–´–ï –ì–†–ê–ù–ò–ß–ù–´–ï –°–õ–£–ß–ê–ò

### –ì—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π #1: –†–∞—Å—á—ë—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞ –ø–æ–∑–∏—Ü–∏–∏
- –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø–æ–∑–∏—Ü–∏–∏ –≤–æ–∑—Ä–∞—Å—Ç–æ–º 39+ —á–∞—Å–æ–≤, –Ω–æ –Ω–µ –∑–∞–∫—Ä—ã—Ç—ã
- Grace period 8—á –∫–∞–∂–µ—Ç—Å—è –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —É—á–∏—Ç—ã–≤–∞–µ—Ç –ª–∏ —Ä–∞—Å—á—ë—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞ —Ä–∞–∑–Ω–∏—Ü—É —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤

### –ì—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π #2: –û—à–∏–±–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã
–ù–∞–π–¥–µ–Ω–æ –≤ –ª–æ–≥–∞—Ö:
```
ERROR - Error fetching price for IDEXUSDT: 'NoneType' object is not subscriptable
ERROR - Could not get price for IDEXUSDT
```

–ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –µ—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω—ã —Ç–µ—Ä–ø–∏—Ç –Ω–µ—É–¥–∞—á—É. –ù—É–∂–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–∫–∞—Ç–∞.

### –ì—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π #3: –ë—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞
–ï—Å–ª–∏ —Ä—ã–Ω–æ–∫ –¥–≤–∏–∂–µ—Ç—Å—è –º–µ–∂–¥—É:
1. –†–∞—Å—á—ë—Ç–æ–º —Ü–µ–ª–µ–≤–æ–π —Ü–µ–Ω—ã
2. –ü–æ–ø—ã—Ç–∫–æ–π —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–∞

–û—Ä–¥–µ—Ä –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–æ–π—Ç–∏ –¥–∞–∂–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π. –ù—É–∂–Ω–æ:
- –ü–æ–ª—É—á–∞—Ç—å —Å–≤–µ–∂—É—é —Ü–µ–Ω—É –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –æ—Ä–¥–µ—Ä–∞
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–≤—Ç–æ—Ä–∞ —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π —Ü–µ–Ω–æ–π

---

## –ê–ù–ê–õ–ò–ó –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π

1. **ExchangeManager:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–¥–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–π –ø–æ–ª—É—á–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
2. **PositionManager:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–ø–æ–∑–∏—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
3. **Database:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
4. **WebSocket:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω –ø–æ–ª—É—á–∞—é—Ç—Å—è)
5. **Enhanced ExchangeManager:** ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û (—Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### –ü—Ä–æ–±–ª–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** `create_or_update_exit_order()` EnhancedExchangeManager –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ü–µ–Ω—ã –æ—Ä–¥–µ—Ä–æ–≤ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ø–æ–ª—ë—Ç–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `core/exchange_manager_enhanced.py`:

```python
async def create_or_update_exit_order(
    self,
    symbol: str,
    side: str,
    amount: float,
    price: float,
    min_price_diff_pct: float = 0.5
):
    """–°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å exit –æ—Ä–¥–µ—Ä —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ü–µ–Ω—ã"""

    # –ù–û–í–û–ï: –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
    current_price = await self._fetch_current_price(symbol)
    if current_price:
        if side == 'buy' and price >= current_price * 0.999:
            logger.warning(
                f"‚ö†Ô∏è BUY LIMIT —Ü–µ–Ω–∞ ${price} —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ/–≤—ã—à–µ —Ä—ã–Ω–∫–∞ ${current_price} "
                f"- —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MARKET –æ—Ä–¥–µ—Ä–∞"
            )
            # –ú–æ–∂–Ω–æ –∞–≤—Ç–æ-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å None –¥–ª—è –ø—Ä–∏–Ω—É–∂–¥–µ–Ω–∏—è –∫ —Ä—ã–Ω–æ—á–Ω–æ–º—É –æ—Ä–¥–µ—Ä—É
        elif side == 'sell' and price <= current_price * 1.001:
            logger.warning(
                f"‚ö†Ô∏è SELL LIMIT —Ü–µ–Ω–∞ ${price} —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ/–Ω–∏–∂–µ —Ä—ã–Ω–∫–∞ ${current_price} "
                f"- —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MARKET –æ—Ä–¥–µ—Ä–∞"
            )

    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
```

---

## –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

1. **–¢–µ—Å—Ç –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞:**
```python
def test_order_type_selection_buy_above_market():
    """BUY –æ—Ä–¥–µ—Ä —Å —Ü–µ–ª—å—é –≤—ã—à–µ —Ä—ã–Ω–∫–∞ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MARKET –æ—Ä–¥–µ—Ä"""
    position = create_short_position(entry=1.0, current=0.9)
    target = 0.95  # –í—ã—à–µ —Ç–µ–∫—É—â–µ–≥–æ 0.9
    order_type = determine_order_type(position, target, 0.9)
    assert order_type == "MARKET"
```

2. **–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ü–µ–Ω—ã:**
```python
def test_price_validation_buy_limit():
    """BUY LIMIT –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∏–∂–µ —Ä—ã–Ω–∫–∞"""
    is_valid = validate_limit_price(side='buy', target=1.1, market=1.0)
    assert is_valid == False
```

3. **–¢–µ—Å—Ç –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Ñ–∞–∑:**
```python
def test_emergency_phase_uses_market_order():
    """–§–∞–∑–∞ emergency –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MARKET –æ—Ä–¥–µ—Ä–∞"""
    phase = calculate_phase(age_hours=30)  # > 28—á
    order_type = get_order_type_for_phase(phase)
    assert order_type == "MARKET"
```

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

1. **–¢–µ—Å—Ç –ø–æ—Ç–æ–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å—Ç–∞—Ä–æ–π –ø–æ–∑–∏—Ü–∏–∏:**
   - –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ä—É—é –ø–æ–∑–∏—Ü–∏—é
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å aged position manager
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ –ë–î

2. **–¢–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏:**
   - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫–∞–∑ –±–∏—Ä–∂–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫–∞—Ç –∫ —Ä—ã–Ω–æ—á–Ω–æ–º—É –æ—Ä–¥–µ—Ä—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –≤ –∏—Ç–æ–≥–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

3. **–¢–µ—Å—Ç –≤—Å–µ—Ö —Ç—Ä—ë—Ö —Ñ–∞–∑:**
   - Grace period —Å –ø—Ä–∏–±—ã–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–µ–π
   - Progressive —Å —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å—é –∫ —É–±—ã—Ç–∫–∞–º
   - Emergency —Å —Ä—ã–Ω–æ—á–Ω—ã–º –æ—Ä–¥–µ—Ä–æ–º

---

## –ê–ù–ê–õ–ò–ó –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ (5—Å –∑–∞ 600—Å)
- **–ü–∞–º—è—Ç—å:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è (~80MB)
- **–ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î:** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ (–ø–∞–∫–µ—Ç–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ)
- **API –≤—ã–∑–æ–≤—ã:** ~91 –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–π, 81 –Ω–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ—Ä–¥–µ—Ä–∞

### –£–∑–∫–∏–µ –º–µ—Å—Ç–∞
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫:** –ù–µ—Ç (—Ç–µ—Ä–ø–∏—Ç –Ω–µ—É–¥–∞—á—É –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)
- **–õ–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ä–¥–µ—Ä–æ–≤:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (—Ç—Ä–∞—Ç–∏—Ç API –≤—ã–∑–æ–≤—ã)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
1. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ü–µ–Ω—ã –ü–ï–†–ï–î –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ—Ä–¥–µ—Ä–∞ (—ç–∫–æ–Ω–æ–º–∏—Ç API –≤—ã–∑–æ–≤—ã)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –ø–æ–≤—Ç–æ—Ä–æ–≤
3. –ü–∞–∫–µ—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –±–∏—Ä–∂–∞–º –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏
4. –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ 5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è fetch –≤—ã–∑–æ–≤–æ–≤

---

## –°–û–û–ë–†–ê–ñ–ï–ù–ò–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

### –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤

1. **–≠–∫—Å–ø–æ–∑–∏—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π:** –í–´–°–û–ö–ê–Ø
   - –ù–µ–∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è —Å—Ç–∞—Ä—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –æ–∑–Ω–∞—á–∞—é—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é —ç–∫—Å–ø–æ–∑–∏—Ü–∏—é
   - 43 –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ñ–∞–∑–µ EMERGENCY (39+ —á–∞—Å–æ–≤) –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º–æ
   - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —É–±—ã—Ç–∫–æ–≤ –ø—Ä–∏ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏ —Ä—ã–Ω–∫–∞

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞:** –û–ö
   - –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ .env
   - –†–µ–∂–∏–º TestNet –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

3. **–£—Ç–µ—á–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–∞—Ö:** –£–ú–ï–†–ï–ù–ù–ê–Ø
   - –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –æ—Ç –±–∏—Ä–∂–∏
   - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É–±—ã—Ç–∫–∞
2. –î–æ–±–∞–≤–∏—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –¥–ª—è –ø–æ–∑–∏—Ü–∏–π —Å—Ç–∞—Ä—à–µ 24—á
3. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–ª—è —Ñ–∞–∑—ã EMERGENCY
4. –î–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è API –≤–æ –≤—Ä–µ–º—è —à—Ç–æ—Ä–º–∞ –æ—à–∏–±–æ–∫

---

## –§–ò–ù–ê–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞ (–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #1)
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ —Ä—ã–Ω–æ—á–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ (–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #2)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –æ—à–∏–±–æ–∫ –±–∏—Ä–∂–∏
4. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä —Å –æ—Ç–∫–∞—Ç–æ–º –∫ —Ä—ã–Ω–æ—á–Ω–æ–º—É –æ—Ä–¥–µ—Ä—É

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–°–ï–†–¨–Å–ó–ù–´–ô - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 24—á)
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–∑—É EMERGENCY –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä—ã–Ω–æ—á–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ü–µ–Ω—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ—Ä–¥–µ—Ä–∞
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ –≤–æ–∑—Ä–∞—Å—Ç–µ –ø–æ–∑–∏—Ü–∏–π (>24—á = –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ)
4. –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–£–ú–ï–†–ï–ù–ù–´–ô - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏)
1. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ—à–∏–±–æ–∫
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–≤—Ç–æ—Ä–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
3. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API –≤—ã–∑–æ–≤–æ–≤ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ü–µ–Ω

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 (–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û)
1. –î–æ–±–∞–≤–∏—Ç—å –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞—Ä—ã—Ö –ø–æ–∑–∏—Ü–∏–π
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞
3. –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π
4. –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤–µ–±—Ö—É–∫–∞ –¥–ª—è –æ–ø–æ–≤–µ—â–µ–Ω–∏–π

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏ **–ü–û–õ–ù–û–°–¢–¨–Æ –ù–ï –§–£–ù–ö–¶–ò–û–ù–ê–õ–ï–ù** –∏–∑-–∑–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–≥–∞ –≤ –≤—ã–±–æ—Ä–µ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞. –ú–æ–¥—É–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LIMIT –æ—Ä–¥–µ—Ä–∞ –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ä—É—à–∞—é—Ç –ø—Ä–∞–≤–∏–ª–∞ –±–∏—Ä–∂–∏, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ 100% –ø—Ä–æ—Ü–µ–Ω—Ç—É –æ—Ç–∫–∞–∑–æ–≤ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π.

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** 0% (–Ω–µ –∑–∞–∫—Ä—ã—Ç–æ –ø–æ–∑–∏—Ü–∏–π)
- **–ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫:** 100% (–≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ä–¥–µ—Ä–æ–≤ –Ω–µ –ø—Ä–æ—à–ª–∏)
- **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:** –£–ú–ï–†–ï–ù–ù–û–ï (–ª–æ–≥–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–º–∞–Ω–∞)
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 0% (–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ)
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** ‚ùå –ù–ï –ì–û–¢–û–í

### –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
1. **–ü–†–ï–ö–†–ê–¢–ò–¢–¨ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** –¥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
2. **–í—Ä—É—á–Ω—É—é –∑–∞–∫—Ä—ã—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–∑–∏—Ü–∏–∏** —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #1 –∏ #2** –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –≤–∫–ª—é—á–µ–Ω–∏–µ–º
4. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è** –¥–ª—è –≤–æ–∑—Ä–∞—Å—Ç–∞ –ø–æ–∑–∏—Ü–∏–π

### –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞:** ~100 —Å—Ç—Ä–æ–∫
- **–¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 2-4 —á–∞—Å–∞
- **–†–∏—Å–∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è:** –£–ú–ï–†–ï–ù–ù–´–ô (–∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤)
- **–ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∏—Ç—å aged position manager

---

**–ö–æ–Ω–µ—Ü –æ—Ç—á—ë—Ç–∞**

*–î–∞–Ω–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤:*
- `/monitoring_data/aged_monitor_*.json` (19 —Å–Ω–∏–º–∫–æ–≤)
- `/bot_output.log` (24,898 —Å—Ç—Ä–æ–∫)
- `/monitoring_output.log` (–ø–æ–ª–Ω–∞—è —Å–µ—Å—Å–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
