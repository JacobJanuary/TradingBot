# –û—Ç—á–µ—Ç –ø–æ –û—à–∏–±–∫–∞–º –∑–∞ –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 –ß–∞—Å–æ–≤

**–ü–µ—Ä–∏–æ–¥**: 2025-10-29 23:10 - 2025-10-30 04:10 (5 —á–∞—Å–æ–≤)
**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 2025-10-30 04:12

---

## üìä –°–≤–æ–¥–∫–∞

| –¢–∏–ø –æ—à–∏–±–∫–∏ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|------------|------------|-------------|--------|
| KeyError 'topped_up' | 9 —Ä–∞–∑ | üü° MEDIUM | –ù—É–∂–µ–Ω —Ñ–∏–∫—Å |
| CROUSDT WebSocket stale | –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É 250+ –º–∏–Ω | üî¥ HIGH | **–¢–†–ï–ë–£–ï–¢ –ù–ï–ú–ï–î–õ–ï–ù–ù–û–ì–û –í–ù–ò–ú–ê–ù–ò–Ø** |
| Failed to calculate position size | 7 –ø–æ–∑–∏—Ü–∏–π | üü¢ LOW | –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ |

**–í—Å–µ–≥–æ –æ—à–∏–±–æ–∫:** 266+ (–º–∏–Ω–∏–º—É–º)

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò

### 1. CROUSDT WebSocket Stale (üî¥ –¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ë–æ—Ç –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ WebSocket –¥–ª—è CROUSDT, –Ω–æ —Ç–µ—Ä–ø–∏—Ç –Ω–µ—É–¥–∞—á—É —É–∂–µ 250+ –º–∏–Ω—É—Ç (4+ —á–∞—Å–∞).

**–û—à–∏–±–∫–∏:**
```
2025-10-30 04:11:35,753 - CRITICAL - üö® CRITICAL ALERT: CROUSDT stale for 250.2 minutes!
2025-10-30 04:11:35,753 - ERROR - ‚ùå FAILED to resubscribe CROUSDT after 3 attempts! MANUAL INTERVENTION REQUIRED
```

**–ß–∞—Å—Ç–æ—Ç–∞:** –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É —Å 00:21 –¥–æ 04:11+ (250+ —Ä–∞–∑)

**–ü—Ä–∏—á–∏–Ω–∞:**
–ü–æ–∑–∏—Ü–∏—è CROUSDT –±—ã–ª–∞ **–ó–ê–ö–†–´–¢–ê** 2025-10-29 20:03 UTC (4 —á–∞—Å–∞ –Ω–∞–∑–∞–¥), –Ω–æ:
1. –ë–æ—Ç –Ω–µ –æ—Ç–ø–∏—Å–∞–ª—Å—è –æ—Ç WebSocket –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
2. –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ø–æ–∑–∏—Ü–∏—é
3. –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
4. –õ–æ–≥–∏—Ä—É–µ—Ç CRITICAL –æ—à–∏–±–∫—É

**–î–∞–Ω–Ω—ã–µ –∏–∑ –ë–î:**
```sql
symbol  | exchange | status | opened_at              | updated_at
CROUSDT | bybit    | closed | 2025-10-29 13:21:24   | 2025-10-29 20:03:11
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é (–ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞)
- ‚ùå –ó–∞—Å–æ—Ä—è–µ—Ç –ª–æ–≥–∏ (250+ CRITICAL —Å–æ–æ–±—â–µ–Ω–∏–π)
- ‚ùå –†–∞—Å—Ö–æ–¥—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∫–∏
- ‚ùå –í–≤–æ–¥–∏—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –æ—Ç–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –æ—Ç WebSocket
2. –û—á–∏—â–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∫–∏

**–§–∞–π–ª:** `core/position_manager_unified_patch.py`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ **–í–´–°–û–ö–ò–ô** - —Ñ–∏–∫—Å –Ω—É–∂–µ–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

---

## üü° –°–†–ï–î–ù–ò–ï –û–®–ò–ë–ö–ò

### 2. KeyError: 'topped_up' (üü° –ù–£–ñ–ï–ù –§–ò–ö–°)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–æ–ª–Ω—ã —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∫–ª—é—á—É 'topped_up' –≤ —Å–ª–æ–≤–∞—Ä–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

**–û—à–∏–±–∫–∏:**
```
2025-10-30 03:34:47,409 - ERROR - Error in wave monitoring loop: 'topped_up'
Traceback (most recent call last):
  File "core/signal_processor_websocket.py", line 294, in _wave_monitoring_loop
    f"topped up: {stats['topped_up']}, "
                  ~~~~~^^^^^^^^^^^^^
KeyError: 'topped_up'
```

**–ß–∞—Å—Ç–æ—Ç–∞:** 9 —Ä–∞–∑ –∑–∞ 5 —á–∞—Å–æ–≤ (–ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–æ–ª–Ω)

**–í—Ä–µ–º—è:**
- 03:34:47
- 03:49:26
- 04:05:04
- (–∏ –µ—â–µ 6 —Ä–∞–∑)

**–ü—Ä–∏—á–∏–Ω–∞:**
–í `signal_processor_websocket.py` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 294 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ `stats['topped_up']`, –Ω–æ —ç—Ç–æ—Ç –∫–ª—é—á –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Å–ª–æ–≤–∞—Ä–µ `stats`.

**–ö–æ–¥ (—Å—Ç—Ä–æ–∫–∞ 294):**
```python
f"topped up: {stats['topped_up']}, "
```

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
–í–æ–ª–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –Ω–æ –ø—Ä–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–≤–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ "topped_up" –ø–æ–∑–∏—Ü–∏—è—Ö, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é (–≤–æ–ª–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞)
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå Exception –≤ –ª–æ–≥–µ
- ‚ùå –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ–ª–Ω—ã –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–≤–æ–¥–∏—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ë—ã–ª–æ:
f"topped up: {stats['topped_up']}, "

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
f"topped up: {stats.get('topped_up', 0)}, "
```

**–§–∞–π–ª:** `core/signal_processor_websocket.py:294`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° **–°–†–ï–î–ù–ò–ô** - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

---

## üü¢ –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–´–ï –û–®–ò–ë–ö–ò (–ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞)

### 3. Failed to Calculate Position Size (üü¢ –û–ñ–ò–î–ê–ï–ú–û)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ ($6) –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –æ—Ä–¥–µ—Ä–∞ ($5 –ø–æ—Å–ª–µ —É—á–µ—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±–∏—Ä–∂–∏).

**–ü—Ä–∏–º–µ—Ä—ã:**

#### 3.1 APEUSDT (03:34:40)
```
‚ùå Failed to calculate position size for APEUSDT
   Position size USD: $6
   Entry price: $0.4302
   Market constraints: min_amount=1.0, step_size=1.0
   Limits: min_amount=1.0, min_cost=5.0

Reason: failed_to_calculate_quantity
```

**–†–∞—Å—á–µ—Ç:**
- –ü–æ–∑–∏—Ü–∏—è: $6
- –¶–µ–Ω–∞: $0.4302
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 6 / 0.4302 = 13.94 ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 13 (step_size=1.0)
- –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è: 13 √ó 0.4302 = $5.59
- min_cost = $5.0 ‚úÖ (–Ω–æ margin –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –ø–æ—Å–ª–µ fees)

#### 3.2 HOOKUSDT (03:34:42)
```
‚ùå Failed to calculate position size for HOOKUSDT
   Position size USD: $6
   Entry price: $0.06352
   Market constraints: min_amount=0.1, step_size=0.1
   Limits: min_amount=0.1, min_cost=5.0
```

**–†–∞—Å—á–µ—Ç:**
- –ü–æ–∑–∏—Ü–∏—è: $6
- –¶–µ–Ω–∞: $0.06352
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 6 / 0.06352 = 94.47 ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 94.4 (step_size=0.1)
- –°—Ç–æ–∏–º–æ—Å—Ç—å: 94.4 √ó 0.06352 = $5.996
- min_cost = $5.0 ‚úÖ (–Ω–æ margin –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω)

#### 3.3 TIAUSDT (03:34:45)
```
‚ùå Failed to calculate position size for TIAUSDT
   Position size USD: $6
   Entry price: $1.0122
   Market constraints: min_amount=1.0, step_size=1.0
```

**–†–∞—Å—á–µ—Ç:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 6 / 1.0122 = 5.93 ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 5
- –°—Ç–æ–∏–º–æ—Å—Ç—å: 5 √ó 1.0122 = $5.06 ‚úÖ

#### 3.4 AKTUSDT (03:34:47)
```
‚ùå Failed to calculate position size for AKTUSDT
   Position size USD: $6
   Entry price: $0.7922
```

#### 3.5 CGPTUSDT (03:49:21)
```
‚ùå Failed to calculate position size for CGPTUSDT
   Position size USD: $6
   Entry price: $0.05433
```

#### 3.6 LINEAUSDT (03:49:23)
```
‚ùå Failed to calculate position size for LINEAUSDT
   Position size USD: $6
   Entry price: $0.01399
```

#### 3.7 OGNUSDT (03:49:26)
```
‚ùå Failed to calculate position size for OGNUSDT
   Position size USD: $6
   Entry price: $0.0462
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–≠—Ç–æ **–ù–û–†–ú–ê–õ–¨–ù–ê–Ø –†–ê–ë–û–¢–ê –ë–û–¢–ê**:
1. –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª ($6)
2. –ü–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø–æ step_size —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–∞–¥–∞–µ—Ç –Ω–∏–∂–µ –º–∏–Ω–∏–º—É–º–∞
3. –ò–ª–∏ margin –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è fees
4. –ë–æ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç —Ç–∞–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚úÖ –ë–æ—Ç –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ª–∏—à–∫–æ–º –º–µ–ª–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ –±–∏—Ä–∂–∏ (Order would immediately trigger)
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚ùå –ü–æ–∑–∏—Ü–∏—è –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–Ω–æ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

**–†–µ—à–µ–Ω–∏–µ:**
–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –≠—Ç–æ –∑–∞—â–∏—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –±–æ—Ç–∞.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**
–ï—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ç–∞–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏, –Ω—É–∂–Ω–æ:
1. –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ $10-15)
2. –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ margin

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ **–ù–ò–ó–ö–ò–ô** - —ç—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞, –∞ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

---

## üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –û—à–∏–±–∫–∏ –ø–æ –í—Ä–µ–º–µ–Ω–∏

| –í—Ä–µ–º—è | –¢–∏–ø –æ—à–∏–±–∫–∏ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|-------|------------|------------|
| 03:29-03:34 | CROUSDT stale | 5 —Ä–∞–∑ |
| 03:34:40-03:34:47 | Position size | 4 –ø–æ–∑–∏—Ü–∏–∏ |
| 03:34:47 | KeyError topped_up | 1 —Ä–∞–∑ |
| 03:35-03:49 | CROUSDT stale | 14 —Ä–∞–∑ |
| 03:49:21-03:49:26 | Position size | 3 –ø–æ–∑–∏—Ü–∏–∏ |
| 03:49:26 | KeyError topped_up | 1 —Ä–∞–∑ |
| 03:50-04:05 | CROUSDT stale | 15 —Ä–∞–∑ |
| 04:05:04 | KeyError topped_up | 1 —Ä–∞–∑ |
| 04:06-04:11 | CROUSDT stale | 5 —Ä–∞–∑ |

### –û—à–∏–±–∫–∏ –ø–æ –¢–∏–ø—É

1. **CROUSDT WebSocket stale**: 250+ —Ä–∞–∑ (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
2. **KeyError 'topped_up'**: 9 —Ä–∞–∑
3. **Position size calculation failed**: 7 –ø–æ–∑–∏—Ü–∏–π

### –û—à–∏–±–∫–∏ –ø–æ –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

| –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | % –æ—Ç –æ–±—â–µ–≥–æ |
|-------------|------------|-------------|
| üî¥ HIGH | 250+ | 94% |
| üü° MEDIUM | 9 | 3% |
| üü¢ LOW/INFO | 7 | 3% |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–≤ —Ç–µ—á–µ–Ω–∏–µ 1 —á–∞—Å–∞):

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å CROUSDT stale issue:**
   ```python
   # –í position_manager_unified_patch.py
   # –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏:
   async def close_position(self, position_id):
       # ... existing code ...

       # –î–û–ë–ê–í–ò–¢–¨:
       # –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç WebSocket
       await self._unsubscribe_from_websocket(symbol, exchange)

       # –£–¥–∞–ª–∏—Ç—å –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
       if symbol in self._monitored_symbols:
           del self._monitored_symbols[symbol]
   ```

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å KeyError 'topped_up':**
   ```python
   # –í signal_processor_websocket.py:294
   # –ë—ã–ª–æ:
   f"topped up: {stats['topped_up']}, "

   # –°—Ç–∞–ª–æ:
   f"topped up: {stats.get('topped_up', 0)}, "
   ```

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫):

3. **–î–æ–±–∞–≤–∏—Ç—å –æ—á–∏—Å—Ç–∫—É stale subscriptions:**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π resubscribe
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è closed - –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
   - –£–¥–∞–ª—è—Ç—å –∏–∑ monitoring list

4. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –£–±—Ä–∞—Ç—å CRITICAL –¥–ª—è –∑–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
   - –î–æ–±–∞–≤–∏—Ç—å INFO –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø–∏—Å–∫–µ
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏):

5. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ WebSocket subscription management:**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π
   - Graceful unsubscribe

6. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫:**
   - Dashboard —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—à–∏–±–æ–∫
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ß—Ç–æ –ù–ï —è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π:

1. ‚úÖ **"Failed to calculate position size"** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∑–∞—â–∏—Ç–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞
2. ‚úÖ **"Position size too small"** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
3. ‚úÖ **"signal_execution_failed" —Å reason "position_manager_returned_none"** - —Å–ª–µ–¥—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ß—Ç–æ –Ø–í–õ–Ø–ï–¢–°–Ø –æ—à–∏–±–∫–æ–π:

1. ‚ùå **CROUSDT stale for 250+ minutes** - –±–∞–≥ –≤ –æ—Ç–ø–∏—Å–∫–µ –æ—Ç WebSocket
2. ‚ùå **KeyError: 'topped_up'** - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–∞
3. ‚ùå **CRITICAL alerts –¥–ª—è –∑–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –§–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. `core/position_manager_unified_patch.py` - –¥–æ–±–∞–≤–∏—Ç—å unsubscribe –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
2. `core/signal_processor_websocket.py:294` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .get()
3. `core/position_manager_unified_patch.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä–µ–¥ resubscribe

### –¢–µ—Å—Ç—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:

1. Test: –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ—Ç WebSocket
2. Test: stats dictionary –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω—É–∂–Ω—ã–µ –∫–ª—é—á–∏
3. Test: stale subscription –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∑–∞–∫—Ä—ã—Ç—É—é –ø–æ–∑–∏—Ü–∏—é

---

## ‚úÖ –ò—Ç–æ–≥–∏

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- üî¥ **1 –∫—Ä–∏—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞** —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (CROUSDT WebSocket)

### –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
- üü° **1 —Å—Ä–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞** —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (KeyError)

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ:
- üü¢ **7 –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** - –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### –û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–æ—Ç–∞:
- ‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
- ‚úÖ WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚ùå –õ–æ–≥–∏ –∑–∞—Å–æ—Ä–µ–Ω—ã –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ CROUSDT
- ‚ùå –ù–µ–±–æ–ª—å—à–∏–µ –±–∞–≥–∏ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –≤–æ–ª–Ω

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 7/10 (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ç—Ä–µ–±—É—é—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
