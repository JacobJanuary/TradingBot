# üéâ SYSTEMD –°–ï–†–í–ò–° –£–°–ü–ï–®–ù–û –£–°–¢–ê–ù–û–í–õ–ï–ù!

**–î–∞—Ç–∞:** 2025-10-30 10:39:18 UTC
**–°—Ç–∞—Ç—É—Å:** ‚úÖ ACTIVE (RUNNING)

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. Systemd –°–µ—Ä–≤–∏—Å
```
‚óè trading-bot.service - Crypto Trading Bot
   Active: active (running)
   Main PID: 12543
   Memory: 130.3M (limit: 1.0G)
   Python: /home/elcrypto/TradingBot/venv/bin/python ‚úÖ
```

### 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–æ—Ç–∞
- ‚úÖ WebSocket - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ Position Manager - 4 –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
- ‚úÖ Trailing Stop - –∞–∫—Ç–∏–≤–µ–Ω –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ Event Logger - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ë–î
- ‚úÖ Price Updates - –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É

### 3. –¢–µ–∫—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏
| –°–∏–º–≤–æ–ª | ID | PnL $ | PnL % | –°—Ç–∞—Ç—É—Å |
|--------|-----|-------|-------|--------|
| HBARUSDT | 5 | +$0.0357 | -0.60% | üü¢ |
| OGUSDT | 4 | +$0.0555 | -0.98% | üü¢ |
| CKBUSDT | 2 | +$0.0191 | -0.32% | üü¢ |
| ASTRUSDT | 1 | +$0.0284 | -0.48% | üü¢ |

**–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ –ø–ª—é—Å–µ!** ‚úÖ

---

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
./manage-service.sh start       # –ó–∞–ø—É—Å—Ç–∏—Ç—å
./manage-service.sh stop        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
./manage-service.sh restart     # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
./manage-service.sh status      # –°—Ç–∞—Ç—É—Å

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
./manage-service.sh logs        # –ñ–∏–≤—ã–µ –ª–æ–≥–∏
./manage-service.sh logs-today  # –õ–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
./manage-service.sh enable      # –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
./manage-service.sh disable     # –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
```

### –ò–ª–∏ —á–µ—Ä–µ–∑ systemctl:

```bash
sudo systemctl start trading-bot
sudo systemctl stop trading-bot
sudo systemctl restart trading-bot
sudo systemctl status trading-bot
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
./manage-service.sh status
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
# –ñ–∏–≤—ã–µ –ª–æ–≥–∏ (–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
./manage-service.sh logs

# –õ–æ–≥–∏ –±–æ—Ç–∞
tail -f logs/trading_bot.log

# –õ–æ–≥–∏ systemd
tail -f logs/systemd-output.log
tail -f logs/systemd-error.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤:
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
systemctl show trading-bot -p MemoryCurrent

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤
systemctl show trading-bot -p NRestarts
```

---

## üîÑ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫

–°–µ—Ä–≤–∏—Å **–í–ö–õ–Æ–ß–ï–ù** –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
systemctl is-enabled trading-bot
# –í—ã–≤–æ–¥: enabled ‚úÖ
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç:
- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ—Å–ª–∏ —É–ø–∞–¥–µ—Ç (—á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –ú–∞–∫—Å–∏–º—É–º 5 –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∑–∞ 200 —Å–µ–∫—É–Ω–¥

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –∏ –ª–∏–º–∏—Ç—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ `NoNewPrivileges=true` - –∑–∞–ø—Ä–µ—Ç –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
- ‚úÖ `PrivateTmp=true` - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è /tmp –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

### –õ–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤:
- ‚úÖ **Memory:** 1.0 GB (—Ç–µ–∫—É—â–µ–µ: 130.3M)
- ‚úÖ **CPU:** 50% –º–∞–∫—Å–∏–º—É–º

### Graceful shutdown:
- ‚úÖ **TimeoutStopSec:** 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –æ—Å—Ç–∞–Ω–æ–≤–∫—É
- ‚úÖ **KillSignal:** SIGTERM (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞)

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   ```bash
   # –î–æ–±–∞–≤–∏—Ç—å –≤ crontab –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑ –≤ —á–∞—Å
   crontab -e
   
   # –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É:
   0 * * * * systemctl is-active trading-bot || echo "Bot is down!" | mail -s "Trading Bot Alert" your@email.com
   ```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥—Ä–æ—Ç–∞—Ü–∏—é** –¥–ª—è `logs/trading_bot.log`

3. **–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   ```bash
   cp /etc/systemd/system/trading-bot.service ~/trading-bot.service.backup
   ```

4. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ:**
   ```bash
   # –î–æ–±–∞–≤–∏—Ç—å –∞–ª–∏–∞—Å
   echo "alias botlogs='tail -f ~/TradingBot/logs/trading_bot.log'" >> ~/.bashrc
   ```

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -n 100 logs/systemd-error.log

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å systemd –ª–æ–≥–∏
sudo journalctl -u trading-bot -n 50

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
./venv/bin/python main.py --mode production

# 4. –°–±—Ä–æ—Å–∏—Ç—å failed state
sudo systemctl reset-failed trading-bot
sudo systemctl restart trading-bot
```

### –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤
systemctl show trading-bot -p NRestarts

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏—á–∏–Ω—É –ø–∞–¥–µ–Ω–∏–π
sudo journalctl -u trading-bot -p err -n 50
```

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –±–æ—Ç
systemctl is-active trading-bot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤–∫–ª—é—á–µ–Ω –ª–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl is-enabled trading-bot

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
ps aux | grep "python.*main.py"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
sudo lsof -p $(pgrep -f "python.*main.py") | grep -E "TCP|UDP"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl show trading-bot -p Environment
```

---

## üéì –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `SERVICE_SETUP_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `QUICKSTART_SERVICE.md` - –±—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞
- `FIX_VENV_ISSUE.md` - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å venv

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- [x] –°–µ—Ä–≤–∏—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
- [x] –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤–∫–ª—é—á–µ–Ω
- [x] WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
- [x] Trailing Stop –∞–∫—Ç–∏–≤–µ–Ω
- [x] –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è
- [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç venv Python
- [x] –õ–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [x] Graceful shutdown –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–í–°–Å –†–ê–ë–û–¢–ê–ï–¢!** ‚úÖ

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-10-30
**–°—Ç–∞—Ç—É—Å:** SUCCESS ‚úÖ
