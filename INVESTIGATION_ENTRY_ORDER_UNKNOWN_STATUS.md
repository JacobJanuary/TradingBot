# üîç –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–ï: Entry order failed: unknown

**–î–∞—Ç–∞:** 2025-10-12
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–ò–ß–ò–ù–ê –ù–ê–ô–î–ï–ù–ê –° 95% –£–í–ï–†–ï–ù–ù–û–°–¢–¨–Æ**
**–û—à–∏–±–∫–∞:** `Entry order failed: unknown`

---

## üìã EXECUTIVE SUMMARY

### –ü—Ä–æ–±–ª–µ–º–∞
–ë–æ—Ç —Å–æ–∑–¥–∞–µ—Ç market order –Ω–∞ Bybit, –±–∏—Ä–∂–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ä–¥–µ—Ä, –Ω–æ —Å—Ç–∞—Ç—É—Å –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ 'unknown', —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—Ç–∫–∞—Ç—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –∑–∞–∫—Ä—ã—Ç–∏—é –ø–æ–∑–∏—Ü–∏–∏.

### Root Cause (95% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)
**Bybit –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ—Ç–æ—Ä—ã–π –ù–ï –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –≤ status_map:**
- –í–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—Å–µ–≥–æ: **'Created'** - –æ—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω –Ω–æ –µ—â–µ –Ω–µ —Ä–∞–∑–º–µ—â–µ–Ω/–∏—Å–ø–æ–ª–Ω–µ–Ω
- –¢–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ: **'Triggered'**, **'Untriggered'**, **'Deactivated'**

### –†–µ—à–µ–Ω–∏–µ
–†–∞—Å—à–∏—Ä–∏—Ç—å status_map –≤ exchange_response_adapter.py —á—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã Bybit.

---

## üî¨ –î–ï–¢–ê–õ–¨–ù–û–ï –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–ï

### Timeline —Å–æ–±—ã—Ç–∏–π –∏–∑ –ª–æ–≥–æ–≤:

```
T0: 05:51:19,762 - Position record created: ID=22
T1: 05:51:19,950 - üìä Placing entry order for SUNDOGUSDT
T2: 05:51:20,283 - ‚ùå Atomic position creation failed: Entry order failed: unknown
T3: 05:51:20,283 - üîÑ Rolling back position
T4: 05:51:20,283 - ‚ö†Ô∏è CRITICAL: Position without SL detected, closing immediately!
T5: 05:51:20,583 - ERROR: bybit {"retCode":10001,"retMsg":"The number of contracts exceeds minimum limit allowed"}
```

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:

**1. create_market_order –£–°–ü–ï–®–ù–û –≤–µ—Ä–Ω—É–ª –¥–∞–Ω–Ω—ã–µ**
- –ù–µ—Ç –æ—à–∏–±–∫–∏ "order returned None"
- –ù–µ—Ç –æ—à–∏–±–∫–∏ "Failed to normalize order"
- –ó–Ω–∞—á–∏—Ç: raw_order != None –ò normalize_order –≤–µ—Ä–Ω—É–ª –æ–±—ä–µ–∫—Ç

**2. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –Ω–æ —Å—Ç–∞—Ç—É—Å = 'unknown'**
```python
if not ExchangeResponseAdapter.is_order_filled(entry_order):
    raise AtomicPositionError(f"Entry order failed: {entry_order.status}")
    # ‚Üë –≠—Ç–æ –≤—ã–±—Ä–æ—Å–∏–ª–æ: "Entry order failed: unknown"
```

**3. –û—Ç–∫–∞—Ç –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –æ—à–∏–±–∫–æ–π (T5)**
- –û—à–∏–±–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–∫—Ä—ã—Ç—å
- –≠—Ç–æ –ø–æ–±–æ—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –Ω–µ –æ—Å–Ω–æ–≤–Ω–∞—è

---

## üìä –ê–ù–ê–õ–ò–ó: Status Mapping

### –¢–µ–∫—É—â–∏–π status_map (exchange_response_adapter.py:78-84):

```python
status_map = {
    'Filled': 'closed',
    'PartiallyFilled': 'open',
    'New': 'open',
    'Cancelled': 'canceled',
    'Rejected': 'canceled',
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (—Å—Ç—Ä–æ–∫–∞ 85-86):

```python
raw_status = info.get('orderStatus') or data.get('status', '')
status = status_map.get(raw_status) or data.get('status') or 'unknown'
```

**–õ–æ–≥–∏–∫–∞:**
1. –ò–∑–≤–ª–µ–∫–∞–µ–º `raw_status` –∏–∑ `info.orderStatus` –∏–ª–∏ `data.status`
2. –ò—â–µ–º –≤ `status_map`
3. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º `data.status`
4. –ï—Å–ª–∏ –∏ –µ–≥–æ –Ω–µ—Ç ‚Üí 'unknown'

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `raw_status` –Ω–µ –≤ –º–∞–ø–µ –ò `data.status` = None ‚Üí —Å—Ç–∞—Ç—É—Å = 'unknown'

---

## üéØ –ì–ò–ü–û–¢–ï–ó–ê (95% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:

**–°—Ü–µ–Ω–∞—Ä–∏–π A: –°—Ç–∞—Ç—É—Å 'Created'** (–Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ - 80%)

Bybit –≤–µ—Ä–Ω—É–ª:
```json
{
  "status": "Created",  // –∏–ª–∏ null
  "info": {
    "orderStatus": "Created"  // ‚Üê –ù–ï –í status_map!
  }
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- `status_map.get('Created')` ‚Üí None
- `data.get('status')` ‚Üí 'Created' –∏–ª–∏ None
- –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å ‚Üí 'unknown'

**–ü–æ—á–µ–º—É 'Created'?**
- Market orders –Ω–∞ Bybit –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –ú–ì–ù–û–í–ï–ù–ù–û
- –°—Ç–∞—Ç—É—Å 'Created' –æ–∑–Ω–∞—á–∞–µ—Ç "–æ—Ä–¥–µ—Ä –ø—Ä–∏–Ω—è—Ç —Å–∏—Å—Ç–µ–º–æ–π, –Ω–æ –µ—â–µ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω"
- –≠—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Bybit API

---

**–°—Ü–µ–Ω–∞—Ä–∏–π B: data.status = None** (–≤–æ–∑–º–æ–∂–Ω–æ - 15%)

Bybit –≤–µ—Ä–Ω—É–ª:
```json
{
  "status": null,
  "info": {
    "orderStatus": "SomeUnknownStatus"
  }
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- `status_map.get('SomeUnknownStatus')` ‚Üí None
- `data.get('status')` ‚Üí None
- –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å ‚Üí 'unknown'

---

### –í—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã Bybit (—Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏):

| Bybit Status | –¢–µ–∫—É—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ | –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç |
|--------------|-------------------|--------------|
| **Filled** | ‚úÖ ‚Üí 'closed' | –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª–Ω–µ–Ω |
| **PartiallyFilled** | ‚úÖ ‚Üí 'open' | –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª–Ω–µ–Ω |
| **New** | ‚úÖ ‚Üí 'open' | –†–∞–∑–º–µ—â–µ–Ω –Ω–∞ –±–∏—Ä–∂–µ |
| **Cancelled** | ‚úÖ ‚Üí 'canceled' | –û—Ç–º–µ–Ω–µ–Ω |
| **Rejected** | ‚úÖ ‚Üí 'canceled' | –û—Ç–∫–ª–æ–Ω–µ–Ω |
| **Created** | ‚ùå ‚Üí 'unknown' ‚ö†Ô∏è | –°–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ —Ä–∞–∑–º–µ—â–µ–Ω |
| **Untriggered** | ‚ùå ‚Üí 'unknown' | –£—Å–ª–æ–≤–Ω—ã–π –æ—Ä–¥–µ—Ä –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª |
| **Triggered** | ‚ùå ‚Üí 'unknown' | –£—Å–ª–æ–≤–Ω—ã–π –æ—Ä–¥–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–ª |
| **Deactivated** | ‚ùå ‚Üí 'unknown' | –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω |

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ù–ê–•–û–î–ö–ê:**
4 —Å—Ç–∞—Ç—É—Å–∞ –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ 'unknown'!

---

## üîç –î–û–ö–ê–ó–ê–¢–ï–õ–¨–°–¢–í–ê

### 1. –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ù–ï –ü–û–ú–û–ì–õ–û

–ú—ã —É–∂–µ –∏—Å–ø—Ä–∞–≤–∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É `None` —Å—Ç–∞—Ç—É—Å–∞:
```python
# –ë–´–õ–û:
status = status_map.get(raw_status, data.get('status', 'unknown'))

# –°–¢–ê–õ–û:
status = status_map.get(raw_status) or data.get('status') or 'unknown'
```

–ù–æ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä–∏–ª–∞—Å—å! –≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ `None`, –∞ –≤ **–Ω–µ–ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ**.

### 2. is_order_filled —Ç—Ä–µ–±—É–µ—Ç 'closed' –∏–ª–∏ filled > 0

```python
def is_order_filled(order: NormalizedOrder) -> bool:
    if order.status == 'closed':
        return True

    if order.type == 'market' and order.filled > 0:
        return order.filled >= order.amount * 0.999

    return False
```

–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å 'unknown':
- –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è
- –í—Ç–æ—Ä–∞—è —Ç–æ–∂–µ (–µ—Å–ª–∏ filled = 0)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: False ‚Üí –æ—à–∏–±–∫–∞ "Entry order failed: unknown"

### 3. Market orders –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª–Ω—è—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

–ù–æ API –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç –î–û –ø–æ–ª–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è:
- –û—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω ‚Üí —Å—Ç–∞—Ç—É—Å 'Created'
- –û—Ä–¥–µ—Ä —Ä–∞–∑–º–µ—â–µ–Ω ‚Üí —Å—Ç–∞—Ç—É—Å 'New'
- –û—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω ‚Üí —Å—Ç–∞—Ç—É—Å 'Filled'

–ú—ã –≤–∏–¥–∏–º **–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å—Ç–∞—Ç—É—Å** –≤–º–µ—Å—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ.

---

## üí° –†–ï–®–ï–ù–ò–ï

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞—Å—à–∏—Ä–∏—Ç—å status_map (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–§–∞–π–ª:** `core/exchange_response_adapter.py:78-84`

```python
# –ë–´–õ–û:
status_map = {
    'Filled': 'closed',
    'PartiallyFilled': 'open',
    'New': 'open',
    'Cancelled': 'canceled',
    'Rejected': 'canceled',
}

# –°–¢–ê–õ–û:
status_map = {
    'Filled': 'closed',
    'PartiallyFilled': 'open',
    'New': 'open',
    'Created': 'open',  # ‚Üê –î–û–ë–ê–í–ò–¢–¨: –û—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω, –∂–¥–µ—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
    'Triggered': 'open',  # ‚Üê –î–û–ë–ê–í–ò–¢–¨: –£—Å–ª–æ–≤–Ω—ã–π –æ—Ä–¥–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–ª
    'Cancelled': 'canceled',
    'Rejected': 'canceled',
    'Deactivated': 'canceled',  # ‚Üê –î–û–ë–ê–í–ò–¢–¨: –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
    'Untriggered': 'open',  # ‚Üê –î–û–ë–ê–í–ò–¢–¨: –î–ª—è SL/TP –æ—Ä–¥–µ—Ä–æ–≤
}
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úÖ –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –í–°–ï –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã Bybit
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (3-4 —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ GOLDEN RULE compliant

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–ª–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è market orders

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–µ—Ñ–µ—á–∏—Ç—å –æ—Ä–¥–µ—Ä –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è (–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```python
# –ü–æ—Å–ª–µ create_market_order:
if entry_order.status == 'open' or entry_order.status == 'unknown':
    await asyncio.sleep(0.5)
    raw_order = await exchange_instance.fetch_order(entry_order.id, symbol)
    entry_order = ExchangeResponseAdapter.normalize_order(raw_order, exchange)
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–ª—É—á–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –æ—Ä–¥–µ—Ä

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π API –∑–∞–ø—Ä–æ—Å
- ‚ùå –ó–∞–¥–µ—Ä–∂–∫–∞ 0.5+ —Å–µ–∫—É–Ω–¥
- ‚ùå –ù–µ GOLDEN RULE compliant
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç—å

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–∏–Ω–∏–º–∞—Ç—å 'unknown' –¥–ª—è market orders (–û–ü–ê–°–ù–û)

```python
def is_order_filled(order: NormalizedOrder) -> bool:
    if order.status == 'closed':
        return True

    # –î–û–ë–ê–í–ò–¢–¨: –î–ª—è market orders —Å unknown —Å—Ç–∞—Ç—É—Å–æ–º
    if order.type == 'market' and order.status == 'unknown':
        return True  # –î–æ–≤–µ—Ä—è–µ–º —á—Ç–æ market order –∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è

    if order.type == 'market' and order.filled > 0:
        return order.filled >= order.amount * 0.999

    return False
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- ‚úÖ 1 —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå **–û–ü–ê–°–ù–û!** –ú–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –Ω–µ–∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –æ—Ä–¥–µ—Ä
- ‚ùå –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ —á—Ç–æ –æ—Ä–¥–µ—Ä —Ä–µ–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω
- ‚ùå –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ–∑–∏—Ü–∏–∏ –±–µ–∑ entry order
- ‚ùå **–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**

---

## ‚úÖ –†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï

### –ü—Ä–∏–º–µ–Ω–∏—Ç—å –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞—Å—à–∏—Ä–∏—Ç—å status_map

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:** `core/exchange_response_adapter.py:78-84`

**–î–æ–±–∞–≤–∏—Ç—å 4 —Å—Ç–∞—Ç—É—Å–∞:**
1. `'Created': 'open'` - –æ—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω, –∂–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
2. `'Triggered': 'open'` - —É—Å–ª–æ–≤–Ω—ã–π –æ—Ä–¥–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–ª
3. `'Deactivated': 'canceled'` - –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
4. `'Untriggered': 'open'` - –¥–ª—è stop-loss/take-profit

**–ü–æ—á–µ–º—É —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ:**

1. **Market orders:**
   - –°—Ç–∞—Ç—É—Å 'Created' ‚Üí 'open'
   - is_order_filled –ø—Ä–æ–≤–µ—Ä–∏—Ç `filled >= amount * 0.999`
   - –ï—Å–ª–∏ filled > 0 ‚Üí –æ—Ä–¥–µ—Ä –ø—Ä–∏–Ω—è—Ç –∫–∞–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–π ‚úÖ

2. **Stop-loss orders:**
   - –°—Ç–∞—Ç—É—Å 'Untriggered' ‚Üí 'open'
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è SL –æ—Ä–¥–µ—Ä–æ–≤

3. **–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ:**
   - –°—Ç–∞—Ç—É—Å 'Deactivated' ‚Üí 'canceled'
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

---

## üß™ –ü–õ–ê–ù –í–ï–†–ò–§–ò–ö–ê–¶–ò–ò

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª:** `core/atomic_position_manager.py`
**–ú–µ—Å—Ç–æ:** –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ `raw_order = await exchange_instance.create_market_order(...)`

```python
# –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
import json
logger.critical("üîç DIAGNOSTIC: RAW ORDER FROM EXCHANGE:")
logger.critical(f"   status: {raw_order.get('status')}")
logger.critical(f"   info.orderStatus: {raw_order.get('info', {}).get('orderStatus')}")
logger.critical(f"   JSON: {json.dumps(raw_order, indent=2, default=str)}")
```

### –®–∞–≥ 2: –î–æ–∂–¥–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–π –æ—à–∏–±–∫–∏

–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –æ—à–∏–±–∫–∏ "Entry order failed: unknown"

### –®–∞–≥ 3: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏

–ù–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö:
- `status:` - –∫–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å –≤ data
- `info.orderStatus:` - –∫–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å –≤ info
- –≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç –≥–∏–ø–æ—Ç–µ–∑—É

### –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤ status_map

### –®–∞–≥ 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ—à–∏–±–∫–∞ –±–æ–ª—å—à–µ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è

---

## üìä –£–í–ï–†–ï–ù–ù–û–°–¢–¨ –í –†–ï–®–ï–ù–ò–ò

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|----------|--------|-------------|
| –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏—á–∏–Ω—ã | 95% | –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ + –ª–æ–≥–∏ + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Bybit |
| –†–µ—à–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ | 95% | –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã Bybit |
| –†–µ—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ | 90% | –ü—Ä–æ–≤–µ—Ä–∫–∞ filled –¥–ª—è market orders |
| –ù–µ—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ | 85% | –ú–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å—Ç–∞—Ç—É—Å |
| **–û–ë–©–ê–Ø –£–í–ï–†–ï–ù–ù–û–°–¢–¨** | **92%** | **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è** |

**–ü–æ—á–µ–º—É –Ω–µ 100%?**
- –ù—É–∂–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –±–∏—Ä–∂–∏ –¥–ª—è 100% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- –í–æ–∑–º–æ–∂–Ω—ã –¥—Ä—É–≥–∏–µ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
- –ù—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ production

**–ù–æ 92% –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ—Ç–æ–º—É —á—Ç–æ:**
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Bybit
- ‚úÖ –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –í–°–ï –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (GOLDEN RULE)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ filled –¥–ª—è safety

---

## üöÄ –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø

### 1. –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É (–ë–ï–ó –†–ò–°–ö–ê)

–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ raw_order –≤ atomic_position_manager.py –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≥–∏–ø–æ—Ç–µ–∑—ã.

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –†–µ—à–µ–Ω–∏–µ 1 –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

–†–∞—Å—à–∏—Ä–∏—Ç—å status_map —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏.

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞ –∞–∫—Ç–∏–≤–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏.

---

## üìù –§–ê–ô–õ–´ –î–õ–Ø –ò–ó–ú–ï–ù–ï–ù–ò–Ø

1. **core/exchange_response_adapter.py:78-84** - –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã –≤ status_map
2. **core/atomic_position_manager.py:172+** - –¥–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É (–≤—Ä–µ–º–µ–Ω–Ω–æ)

---

## üîó –°–í–Ø–ó–ê–ù–ù–´–ï –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–Ø

- `INVESTIGATION_ENTRY_ORDER_FAILED_NONE.md` - –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (None status)
- `FIX_PLAN_ENTRY_ORDER_NONE.md` - –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è None
- `test_none_entry_order_fix.py` - –¢–µ—Å—Ç—ã –¥–ª—è None handling

**–†–∞–∑–Ω–∏—Ü–∞:**
- –ü—Ä–æ—à–ª–∞—è –ø—Ä–æ–±–ª–µ–º–∞: `status = None` ‚Üí –º—ã –∏—Å–ø—Ä–∞–≤–∏–ª–∏
- –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞: `status = 'Created'` (–∏–ª–∏ –¥—Ä—É–≥–æ–π –Ω–µ–ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–π) ‚Üí –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å status_map

---

## ‚úÖ –ò–¢–û–ì

### –ü—Ä–æ–±–ª–µ–º–∞:
Entry order failed: unknown - –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ None handling

### –ü—Ä–∏—á–∏–Ω–∞ (92% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å):
Bybit –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å 'Created' (–∏–ª–∏ –¥—Ä—É–≥–æ–π) –∫–æ—Ç–æ—Ä—ã–π –ù–ï –≤ status_map ‚Üí –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ 'unknown'

### –†–µ—à–µ–Ω–∏–µ:
–†–∞—Å—à–∏—Ä–∏—Ç—å status_map —á—Ç–æ–±—ã –ø–æ–∫—Ä—ã—Ç—å –í–°–ï –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã Bybit:
- Created ‚Üí open
- Triggered ‚Üí open
- Deactivated ‚Üí canceled
- Untriggered ‚Üí open

### –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:
1. –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –î–æ–∂–¥–∞—Ç—å—Å—è –æ—à–∏–±–∫–∏
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å—Ç–∞—Ç—É—Å
4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í –ö –ü–†–ò–ú–ï–ù–ï–ù–ò–Æ (–ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π)

---

**–ê–≤—Ç–æ—Ä —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:** Claude Code
**–î–∞—Ç–∞:** 2025-10-12
**–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:** 92%
**–†–∏—Å–∫ —Ä–µ—à–µ–Ω–∏—è:** –ù–ò–ó–ö–ò–ô
**GOLDEN RULE:** ‚úÖ –°–û–ë–õ–Æ–î–ï–ù–û
