# üîç –ê–ù–ê–õ–ò–ó –û–®–ò–ë–û–ö –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

**–î–∞—Ç–∞:** 2025-10-17 19:12-19:13
**–õ–æ–≥:** logs/production_20251017_191139.log
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~1 –º–∏–Ω—É—Ç–∞

---

## ‚úÖ –•–û–†–û–®–ò–ï –ù–û–í–û–°–¢–ò

### –ù–∞—à —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:

- ‚úÖ **0 –æ—à–∏–±–æ–∫ -4016** (price limit violations)
- ‚úÖ **0 LIMIT order rejections**
- ‚úÖ Aged position manager –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ

---

## ‚ö†Ô∏è –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. Price Fetching Errors (18 –ø–æ–∑–∏—Ü–∏–π)

**–û—à–∏–±–∫–∞:** `'NoneType' object is not subscriptable`

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å–∏–º–≤–æ–ª—ã:**
- IDEXUSDT, SCAUSDT, NODEUSDT, AGIUSDT
- GLMRUSDT, ETHBTCUSDT, CLOUDUSDT, DOGUSDT
- OSMOUSDT, OKBUSDT, HNTUSDT, RADUSDT
- PYRUSDT, BOBAUSDT, ORBSUSDT, SAROSUSDT
- 1000NEIROCTOUSDT, XDCUSDT

**–ü—Ä–∏—á–∏–Ω–∞:** 
- –ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ `aged_position_manager.py` –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ exchange API
- –°–≤—è–∑–∞–Ω–æ —Å –æ—à–∏–±–∫–æ–π `'unified'` (—Ç–∏–ø CCXT)

**–ß–∞—Å—Ç–æ—Ç–∞:** –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –°–†–ï–î–ù–Ø–Ø
- –ú–æ–¥—É–ª—å –Ω–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏
- –ù–æ –Ω–µ –∫—Ä–∞—à–∏—Ç—Å—è, –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

---

### 2. Trailing Stop Errors (13 —Å–∏–º–≤–æ–ª–æ–≤)

**–û—à–∏–±–∫–∞:** `Trailing stop not found for [SYMBOL]! This should not happen.`

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å–∏–º–≤–æ–ª—ã:**
- GLMRUSDT, DOGUSDT, SAPIENUSDT, EPICUSDT
- OXTUSDT, SYSUSDT, BATUSDT, ALTUSDT
- SKYAIUSDT, PROMUSDT, YGGUSDT, SUPERUSDT, SOONUSDT

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–æ–∑–∏—Ü–∏–∏ –≤ –ë–î –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –∏–º–µ—é—â–∏–µ trailing stop
- –ù–æ trailing stop manager –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –∏—Ö

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –ù–ò–ó–ö–ê–Ø
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É aged position manager
- Trailing stops –ø—Ä–æ—Å—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –ü–æ–∑–∏—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã —Å—Ç–æ–ø-–ª–æ—Å—Å–∞–º–∏

---

### 3. 'unified' Type Errors

**–û—à–∏–±–∫–∞:** `'unified'` (KeyError –∏–ª–∏ TypeError)

**–ü—Ä–∏–º–µ—Ä—ã:**
```
- Failed to fetch ticker for IDEXUSDT: 'unified'
- Unexpected error in rate limited function: 'unified'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- CCXT –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∫–ª—é—á—É
- –°–≤—è–∑–∞–Ω–æ —Å —Ç–∏–ø–æ–º —Ä—ã–Ω–∫–∞ 'unified' (Bybit)

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –°–†–ï–î–ù–Ø–Ø
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –¢—Ä–µ–±—É–µ—Ç —Ñ–∏–∫—Å–∞ –≤ exchange_manager

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –û–®–ò–ë–û–ö

```
–í—Å–µ–≥–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π "error": 111
Trailing stop errors: ~50
Price fetching errors: ~36
'unified' errors: ~25
```

**–£—Å–ø–µ—à–Ω–æ—Å—Ç—å aged position manager:**
- –ü–æ–∑–∏—Ü–∏–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ (—Ü–∏–∫–ª –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è)
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫: 0
- –û—à–∏–±–æ–∫ -4016: 0 ‚úÖ

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å price fetching

**–ü—Ä–æ–±–ª–µ–º–∞:** `_get_current_price()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –¥–ª—è Bybit —Å–∏–º–≤–æ–ª–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥ –≤ `aged_position_manager.py`
2. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É 'unified' —Ç–∏–ø–∞
3. –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Trailing stop warnings

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ë–î –∏ trailing stop manager

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
2. –õ–∏–±–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å WARNING (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: 'unified' type errors

**–ü—Ä–æ–±–ª–µ–º–∞:** CCXT –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 'unified' –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
1. –û–±–Ω–æ–≤–∏—Ç—å exchange_manager –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å unified
2. –õ–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å mapping 'unified' ‚Üí 'linear'

---

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢

1. ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ aged position manager
2. ‚úÖ –ù–æ–≤–∞—è PnL-priority —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
3. ‚úÖ MARKET/LIMIT –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞
4. ‚úÖ –ù–µ—Ç price limit violations
5. ‚úÖ –ë–æ—Ç —Å—Ç–∞–±–∏–ª–µ–Ω, –Ω–µ –∫—Ä–∞—à–∏—Ç—Å—è

---

**–í–´–í–û–î:** –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–µ–Ω, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ñ–∏–∫—Å –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω –¥–ª—è Bybit —Å–∏–º–≤–æ–ª–æ–≤.
