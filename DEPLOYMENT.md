# üìö –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ Trading Bot

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-—Å–∏—Å—Ç–µ–º–µ)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
3. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
4. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
5. [–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π](#–æ–ø–∏—Å–∞–Ω–∏–µ-–º–æ–¥—É–ª–µ–π)
6. [–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã](#–∑–∞–ø—É—Å–∫-—Å–∏—Å—Ç–µ–º—ã)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
8. [–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
9. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

## üñ• –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **–û–°**: Ubuntu 20.04+ / macOS 12+ / Windows 10+
- **Python**: 3.12+
- **PostgreSQL**: 14+
- **RAM**: 4GB
- **CPU**: 2 cores
- **Disk**: 20GB SSD
- **Network**: –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (low latency –¥–ª—è HFT)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è production:
- **–û–°**: Ubuntu 22.04 LTS
- **Python**: 3.12.7
- **PostgreSQL**: 15+
- **RAM**: 16GB
- **CPU**: 8 cores
- **Disk**: 100GB SSD
- **Network**: Dedicated server —Å low latency (<10ms –∫ –±–∏—Ä–∂–∞–º)

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/your-org/TradingBot.git
cd TradingBot
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
python3.12 -m venv .venv
source .venv/bin/activate  # Linux/macOS
# –∏–ª–∏
.venv\Scripts\activate  # Windows
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install --upgrade pip
pip install -r requirements.txt
pip install -r requirements-dev.txt  # –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

#### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```sql
CREATE DATABASE trading_bot;
CREATE USER trading_user WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE trading_bot TO trading_user;

-- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º
\c trading_bot;
CREATE SCHEMA IF NOT EXISTS fas;
CREATE SCHEMA IF NOT EXISTS monitoring;
GRANT ALL ON SCHEMA fas TO trading_user;
GRANT ALL ON SCHEMA monitoring TO trading_user;
```

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π:
```bash
alembic upgrade head
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π –±–∏—Ä–∂

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cp .env.example .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ API –∫–ª—é—á–∏:
```env
# Database
DATABASE_URL=postgresql://trading_user:password@localhost:5432/trading_bot

# Binance
BINANCE_API_KEY=your_binance_api_key
BINANCE_API_SECRET=your_binance_secret_key
BINANCE_TESTNET=false

# Bybit
BYBIT_API_KEY=your_bybit_api_key
BYBIT_API_SECRET=your_bybit_secret_key
BYBIT_TESTNET=false

# System
LOG_LEVEL=INFO
ENVIRONMENT=production
PROMETHEUS_PORT=8000
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `config/config.yaml`:

```yaml
# Trading Configuration
trading:
  exchanges:
    - name: binance
      enabled: true
      markets: [BTC/USDT, ETH/USDT, BNB/USDT]
      leverage: 5
      testnet: false
    
    - name: bybit
      enabled: true
      markets: [BTC/USDT, ETH/USDT]
      leverage: 10
      testnet: false

# Risk Management
risk:
  max_position_size: 10000  # USD
  max_daily_loss: 1000      # USD
  max_open_positions: 5
  max_leverage: 10
  max_correlation: 0.7
  default_stop_loss: 2.0    # %
  risk_per_trade: 1.0       # % –æ—Ç –∫–∞–ø–∏—Ç–∞–ª–∞

# Position Protection
protection:
  max_drawdown_pct: 5.0
  critical_loss_pct: 3.0
  max_position_hours: 48
  volatility_threshold: 2.0
  correlation_threshold: 0.7
  
  stop_loss:
    enabled: true
    type: combined  # fixed, trailing, combined
    fixed_percentage: 2.0
    trailing_percentage: 1.5
    atr_multiplier: 2.5
    time_based_hours: 24

# Signal Processing
signals:
  min_score_week: 70
  min_score_month: 80
  time_window_minutes: 5
  max_signals_per_hour: 10

# Monitoring
monitoring:
  health_check_interval: 60  # seconds
  metrics_port: 8000
  alert_webhook_url: https://discord.com/api/webhooks/...
  
# Performance Tracking
performance:
  report_interval: daily
  benchmark_symbol: BTC/USDT
  save_reports: true
  report_path: ./reports

# System
system:
  auto_restart: true
  max_retries: 3
  retry_delay: 60  # seconds
  cleanup_old_data_days: 30
  backup_enabled: true
  backup_path: ./backups
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Signal Source (FAS DB)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Signal Processor                       ‚îÇ
‚îÇ  ‚Ä¢ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ score                                   ‚îÇ
‚îÇ  ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞                            ‚îÇ
‚îÇ  ‚Ä¢ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ä–¥–µ—Ä–æ–≤                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ                     ‚îÇ
           ‚ñº                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Exchange Manager ‚îÇ   ‚îÇ  Position Manager ‚îÇ
‚îÇ  ‚Ä¢ Binance       ‚îÇ   ‚îÇ  ‚Ä¢ –û—Ç–∫—Ä—ã—Ç–∏–µ      ‚îÇ
‚îÇ  ‚Ä¢ Bybit         ‚îÇ   ‚îÇ  ‚Ä¢ –ó–∞–∫—Ä—ã—Ç–∏–µ      ‚îÇ
‚îÇ  ‚Ä¢ Order routing ‚îÇ   ‚îÇ  ‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                     ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Protection System                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   StopLossManager   ‚îÇ   PositionGuard     ‚îÇTrailingStop ‚îÇ
‚îÇ   ‚Ä¢ Fixed stops     ‚îÇ   ‚Ä¢ Health monitor  ‚îÇ ‚Ä¢ Dynamic   ‚îÇ
‚îÇ   ‚Ä¢ ATR-based       ‚îÇ   ‚Ä¢ Risk assessment ‚îÇ ‚Ä¢ Profit    ‚îÇ
‚îÇ   ‚Ä¢ Time-based      ‚îÇ   ‚Ä¢ Auto-liquidation‚îÇ   lock      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Monitoring System                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   Metrics    ‚îÇ Health Check ‚îÇ Performance  ‚îÇ  Alerts    ‚îÇ
‚îÇ   Prometheus ‚îÇ   Endpoint   ‚îÇ   Tracker    ‚îÇ  Discord   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üì¶ –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π

### Core Modules

#### 1. **SignalProcessor** (`core/signal_processor.py`)
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –æ—Ç —Å–∏—Å—Ç–µ–º—ã FAS.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from core.signal_processor import SignalProcessor

processor = SignalProcessor(
    exchange_manager=exchange_manager,
    risk_manager=risk_manager,
    repository=repository,
    config=config['signals']
)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
result = await processor.process_signal(signal)

# –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
results = await processor.process_signals_batch()
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ score
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫-–ª–∏–º–∏—Ç–æ–≤
- –†–∞—Å—á—ë—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –Ω–∞ –±–∏—Ä–∂–∞—Ö

#### 2. **ExchangeManager** (`core/exchange_manager.py`)
–£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏ –∫ –±–∏—Ä–∂–∞–º —á–µ—Ä–µ–∑ CCXT.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from core.exchange_manager import ExchangeManager

manager = ExchangeManager(config['trading']['exchanges'])
await manager.initialize()

# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞
order = await manager.create_order(
    exchange='binance',
    symbol='BTC/USDT',
    type='limit',
    side='buy',
    amount=0.1,
    price=50000
)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
balance = await manager.fetch_balance('binance')

# –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
await manager.close_position('BTC/USDT', 'long', 0.1)
```

#### 3. **PositionManager** (`core/position_manager.py`)
–£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø–æ–∑–∏—Ü–∏–π.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from core.position_manager import PositionManager

pm = PositionManager(exchange_manager, repository, config)

# –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
position = await pm.open_position(
    signal=signal,
    size=0.1,
    leverage=5
)

# –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ (30%)
await pm.partial_close(position_id, close_percent=30)

# –ü–æ–ª–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
result = await pm.close_position(position_id)
```

#### 4. **RiskManager** (`core/risk_manager.py`)
–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ä–∏—Å–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–∑–∏—Ü–∏–π –∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from core.risk_manager import RiskManager

rm = RiskManager(repository, config['risk'])

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
can_open = await rm.check_position_limit('binance')

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞ —É–±—ã—Ç–∫–æ–≤
within_limit = await rm.check_daily_loss_limit()

# –†–∞—Å—á—ë—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
size = await rm.calculate_position_size(
    symbol='BTC/USDT',
    price=Decimal('50000'),
    stop_loss=Decimal('49000'),
    account_balance=Decimal('10000')
)

# –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è
portfolio_risk = await rm.calculate_portfolio_risk()
```

### Protection Modules

#### 5. **StopLossManager** (`protection/stop_loss_manager.py`)
–£–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–æ–ø-–ª–æ—Å—Å–∞–º–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from protection.stop_loss_manager import StopLossManager

slm = StopLossManager(exchange_manager, repository, config['protection']['stop_loss'])

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å–æ–≤ –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏
stops = await slm.setup_stops(position)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–ø–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã
await slm.update_stops(position, new_price)

# –û—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö —Å—Ç–æ–ø–æ–≤
await slm.cancel_position_stops(position_id)
```

**–¢–∏–ø—ã —Å—Ç–æ–ø-–ª–æ—Å—Å–æ–≤:**
- **Fixed**: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –≤—Ö–æ–¥–∞
- **ATR-based**: –ù–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (ATR)
- **Time-based**: –£–∂–µ—Å—Ç–æ—á–µ–Ω–∏–µ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
- **Combined**: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤

#### 6. **PositionGuard** (`protection/position_guard.py`)
–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –ø–æ–∑–∏—Ü–∏–π.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from protection.position_guard import PositionGuard

guard = PositionGuard(
    exchange_manager=exchange_manager,
    risk_manager=risk_manager,
    stop_loss_manager=slm,
    trailing_stop_manager=tsm,
    repository=repository,
    event_router=router,
    config=config['protection']
)

# –ù–∞—á–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–∏
await guard.start_protection(position)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
await guard.monitor_all_positions()

# –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ª–∏–∫–≤–∏–¥–∞—Ü–∏—è
await guard.emergency_liquidation(reason="Critical market event")
```

**–§—É–Ω–∫—Ü–∏–∏ –∑–∞—â–∏—Ç—ã:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è –ø–æ–∑–∏—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–∂–µ—Å—Ç–æ—á–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã
- –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —Ä–æ—Å—Ç–µ —Ä–∏—Å–∫–∞
- –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ª–∏–∫–≤–∏–¥–∞—Ü–∏—è

#### 7. **TrailingStopManager** (`protection/trailing_stop.py`)
–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø—ã.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from protection.trailing_stop import TrailingStopManager

tsm = TrailingStopManager(exchange_manager, repository, config)

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø–∞
await tsm.activate_trailing_stop(
    position=position,
    trail_percent=1.5,
    activation_price=position.entry_price * 1.02
)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ —Ü–µ–Ω—ã
await tsm.update_trailing_stops(position_id, new_price)
```

### WebSocket Modules

#### 8. **BinanceStream** (`websocket/binance_stream.py`)
WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Binance.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from websocket.binance_stream import BinancePrivateStream

stream = BinancePrivateStream(config['binance'])

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
stream.register_callback('position', handle_position_update)
stream.register_callback('order', handle_order_update)

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫
await stream.connect()
await stream.subscribe_user_data()
```

#### 9. **BybitStream** (`websocket/bybit_stream.py`)
WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Bybit —á–µ—Ä–µ–∑ CCXT Pro.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from websocket.bybit_stream import BybitStream

stream = BybitStream(config['bybit'])

# –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
await stream.subscribe_orderbook('BTC/USDT')
await stream.subscribe_trades('ETH/USDT')

# –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
await stream.subscribe_positions()
await stream.subscribe_orders()
```

#### 10. **EventRouter** (`websocket/event_router.py`)
–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –æ—Ç WebSocket.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from websocket.event_router import EventRouter

router = EventRouter()

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
@router.on('position.update')
async def handle_position(data):
    print(f"Position updated: {data}")

router.add_handler('price.update', price_handler)

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π
await router.emit('price.update', {
    'symbol': 'BTC/USDT',
    'price': 50000
})
```

### Monitoring Modules

#### 11. **MetricsCollector** (`monitoring/metrics.py`)
–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –¥–ª—è Prometheus.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from monitoring.metrics import MetricsCollector

metrics = MetricsCollector(config['monitoring'])

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
metrics.record_trade(symbol='BTC/USDT', pnl=100)
metrics.record_signal_processed()
metrics.record_position_opened()

# –ó–∞–ø—É—Å–∫ HTTP —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è Prometheus
await metrics.start_http_server(port=8000)
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- `trading_bot_trades_total` - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫
- `trading_bot_pnl` - P&L –ø–æ –ø–æ–∑–∏—Ü–∏—è–º
- `trading_bot_positions_active` - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- `trading_bot_signals_processed` - –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- `trading_bot_errors_total` - –û—à–∏–±–∫–∏ —Å–∏—Å—Ç–µ–º—ã

#### 12. **HealthCheck** (`monitoring/health_check.py`)
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from monitoring.health_check import HealthCheck

health = HealthCheck(
    exchange_manager=exchange_manager,
    repository=repository,
    config=config
)

# –ó–∞–ø—É—Å–∫ HTTP endpoint
await health.start_server(port=8080)

# –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
status = await health.check_system_health()
```

**Endpoint:** `GET http://localhost:8080/health`

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "timestamp": "2024-01-01T00:00:00Z",
  "checks": {
    "database": "ok",
    "exchanges": {
      "binance": "ok",
      "bybit": "ok"
    },
    "websockets": "ok",
    "risk_limits": "ok"
  }
}
```

#### 13. **PerformanceTracker** (`monitoring/performance.py`)
–ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from monitoring.performance import PerformanceTracker

tracker = PerformanceTracker(repository, config['performance'])

# –†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫
metrics = await tracker.calculate_metrics()

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞
report = await tracker.generate_report(period='daily')

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞
await tracker.save_report(report, format='json')
```

**–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- Win Rate
- Profit Factor
- Sharpe Ratio
- Sortino Ratio
- Maximum Drawdown
- Calmar Ratio
- Average Win/Loss
- Recovery Factor

### Utility Modules

#### 14. **Database Repository** (`database/repository.py`)
–°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from database.repository import Repository

repo = Repository(db_config)
await repo.initialize()

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
signals = await repo.get_unprocessed_signals(
    min_score_week=70,
    min_score_month=80
)

# –†–∞–±–æ—Ç–∞ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏
positions = await repo.get_active_positions('binance')
await repo.update_position(position)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
daily_pnl = await repo.get_daily_pnl()
```

#### 15. **Validators** (`utils/validators.py`)
–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from utils.validators import (
    validate_symbol,
    validate_order_type,
    validate_leverage,
    validate_price
)

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–∞
is_valid = validate_symbol('BTC/USDT')

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω—ã
is_valid = validate_price(Decimal('50000'), symbol='BTC/USDT')
```

#### 16. **Decorators** (`utils/decorators.py`)
–ü–æ–ª–µ–∑–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from utils.decorators import (
    retry_on_error,
    rate_limit,
    require_connection,
    log_execution_time
)

@retry_on_error(max_retries=3, delay=1)
async def risky_operation():
    pass

@rate_limit(calls=10, period=60)
async def api_call():
    pass
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### 1. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
python main.py --config config/config.yaml --debug
```

### 2. –ó–∞–ø—É—Å–∫ –≤ production
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ systemd (Linux)
sudo cp trading-bot.service /etc/systemd/system/
sudo systemctl enable trading-bot
sudo systemctl start trading-bot

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker-compose up -d
```

### 3. –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–¢–æ–ª—å–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```bash
python -m monitoring.health_check --port 8080
```

**–¢–æ–ª—å–∫–æ WebSocket streams:**
```bash
python -m websocket.binance_stream --config config/config.yaml
```

**–ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥:**
```bash
python scripts/backtest.py \
    --start-date 2024-01-01 \
    --end-date 2024-01-31 \
    --symbol BTC/USDT \
    --strategy momentum
```

### 4. Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
version: '3.8'

services:
  trading-bot:
    build: .
    container_name: trading-bot
    restart: unless-stopped
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - BINANCE_API_KEY=${BINANCE_API_KEY}
      - BINANCE_API_SECRET=${BINANCE_API_SECRET}
    volumes:
      - ./config:/app/config
      - ./logs:/app/logs
      - ./reports:/app/reports
    ports:
      - "8000:8000"  # Prometheus metrics
      - "8080:8080"  # Health check
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:15
    container_name: trading-db
    restart: unless-stopped
    environment:
      - POSTGRES_DB=trading_bot
      - POSTGRES_USER=trading_user
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    container_name: trading-cache
    restart: unless-stopped
    ports:
      - "6379:6379"

  prometheus:
    image: prom/prometheus
    container_name: trading-prometheus
    volumes:
      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus
    ports:
      - "9090:9090"

  grafana:
    image: grafana/grafana
    container_name: trading-grafana
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_PASSWORD}
    volumes:
      - grafana_data:/var/lib/grafana
      - ./monitoring/dashboards:/etc/grafana/provisioning/dashboards
    ports:
      - "3000:3000"

volumes:
  postgres_data:
  prometheus_data:
  grafana_data:
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1. Prometheus –º–µ—Ç—Ä–∏–∫–∏
–î–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ `http://localhost:8000/metrics`

### 2. Grafana –¥–∞—à–±–æ—Ä–¥—ã
–î–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ `http://localhost:3000`

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –∏–∑ `monitoring/dashboards/`:
- `trading_overview.json` - –û–±—â–∏–π –æ–±–∑–æ—Ä
- `positions.json` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π
- `performance.json` - –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `risk.json` - –†–∏—Å–∫-–º–µ—Ç—Ä–∏–∫–∏

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `logs/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
- `trading.log` - –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
- `errors.log` - –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
- `trades.log` - –¢–æ—Ä–≥–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `signals.log` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `utils/logger.py`:
```python
from utils.logger import setup_logger

logger = setup_logger(
    name='trading_bot',
    level='INFO',
    log_file='logs/trading.log'
)
```

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CLI

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
python cli.py status

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
python cli.py positions close-all --confirm

# –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
python cli.py emergency-stop --reason "Market crash"

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
python cli.py positions list --active

# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
python cli.py performance --period 30d
```

## üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### 1. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```bash
python scripts/cleanup.py --days 30
```

**–ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
```bash
python scripts/backup.py --destination s3://backups/
```

### 2. –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

**–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```bash
python scripts/weekly_report.py --email admin@example.com
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
pip list --outdated
pip-audit  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```

### 3. –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –∑–∞–¥–∞—á–∏

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
```sql
VACUUM ANALYZE;
REINDEX DATABASE trading_bot;
```

**–†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤:**
```bash
logrotate -f /etc/logrotate.d/trading-bot
```

## üî® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∏—Ä–∂–µ
```
Error: Exchange connection timeout
```
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP whitelist –Ω–∞ –±–∏—Ä–∂–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### 2. –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ rate limit
```
Error: Rate limit exceeded
```
**–†–µ—à–µ–Ω–∏–µ:**
- –£–º–µ–Ω—å—à–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebSocket –≤–º–µ—Å—Ç–æ REST API
- –î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

#### 3. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
```
Error: Insufficient balance
```
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ –±–∏—Ä–∂–µ
- –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ leverage

#### 4. –ü–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```
Error: Failed to close position
```
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –æ—Ä–¥–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ margin mode (isolated/cross)
- –ó–∞–∫—Ä–æ–π—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –±–∏—Ä–∂—É

### –ö–æ–º–∞–Ω–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
python diagnose.py connections

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python diagnose.py config

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python diagnose.py database

# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
python diagnose.py full --verbose
```

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–í–∫–ª—é—á–∏—Ç–µ debug —Ä–µ–∂–∏–º –≤ `.env`:
```env
LOG_LEVEL=DEBUG
```

–ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ CLI:
```bash
LOG_LEVEL=DEBUG python main.py
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ö–æ–Ω—Ç–∞–∫—Ç—ã
- **Email**: support@tradingbot.com
- **Discord**: https://discord.gg/tradingbot
- **GitHub Issues**: https://github.com/your-org/TradingBot/issues

### –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- [CCXT Documentation](https://docs.ccxt.com)
- [Binance API Docs](https://binance-docs.github.io/apidocs)
- [Bybit API Docs](https://bybit-exchange.github.io/docs)
- [PostgreSQL Tuning](https://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary Software - All rights reserved.

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 26.09.2024*